"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/m3u8-parser";
exports.ids = ["vendor-chunks/m3u8-parser"];
exports.modules = {

/***/ "(ssr)/../node_modules/m3u8-parser/dist/m3u8-parser.es.js":
/*!**********************************************************!*\
  !*** ../node_modules/m3u8-parser/dist/m3u8-parser.es.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LineStream: () => (/* binding */ LineStream),\n/* harmony export */   ParseStream: () => (/* binding */ ParseStream),\n/* harmony export */   Parser: () => (/* binding */ Parser)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/inheritsLoose */ \"(ssr)/../node_modules/@babel/runtime/helpers/inheritsLoose.js\");\n/* harmony import */ var _babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _videojs_vhs_utils_es_stream_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @videojs/vhs-utils/es/stream.js */ \"(ssr)/../node_modules/@videojs/vhs-utils/es/stream.js\");\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"(ssr)/../node_modules/@babel/runtime/helpers/extends.js\");\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ \"(ssr)/../node_modules/@babel/runtime/helpers/assertThisInitialized.js\");\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _videojs_vhs_utils_es_decode_b64_to_uint8_array_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @videojs/vhs-utils/es/decode-b64-to-uint8-array.js */ \"(ssr)/../node_modules/@videojs/vhs-utils/es/decode-b64-to-uint8-array.js\");\n/*! @name m3u8-parser @version 4.8.0 @license Apache-2.0 */ \n\n\n\n\n/**\n * A stream that buffers string input and generates a `data` event for each\n * line.\n *\n * @class LineStream\n * @extends Stream\n */ var LineStream = /*#__PURE__*/ function(_Stream) {\n    _babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_0___default()(LineStream, _Stream);\n    function LineStream() {\n        var _this;\n        _this = _Stream.call(this) || this;\n        _this.buffer = \"\";\n        return _this;\n    }\n    /**\n   * Add new data to be parsed.\n   *\n   * @param {string} data the text to process\n   */ var _proto = LineStream.prototype;\n    _proto.push = function push(data) {\n        var nextNewline;\n        this.buffer += data;\n        nextNewline = this.buffer.indexOf(\"\\n\");\n        for(; nextNewline > -1; nextNewline = this.buffer.indexOf(\"\\n\")){\n            this.trigger(\"data\", this.buffer.substring(0, nextNewline));\n            this.buffer = this.buffer.substring(nextNewline + 1);\n        }\n    };\n    return LineStream;\n}(_videojs_vhs_utils_es_stream_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\nvar TAB = String.fromCharCode(0x09);\nvar parseByterange = function parseByterange(byterangeString) {\n    // optionally match and capture 0+ digits before `@`\n    // optionally match and capture 0+ digits after `@`\n    var match = /([0-9.]*)?@?([0-9.]*)?/.exec(byterangeString || \"\");\n    var result = {};\n    if (match[1]) {\n        result.length = parseInt(match[1], 10);\n    }\n    if (match[2]) {\n        result.offset = parseInt(match[2], 10);\n    }\n    return result;\n};\n/**\n * \"forgiving\" attribute list psuedo-grammar:\n * attributes -> keyvalue (',' keyvalue)*\n * keyvalue   -> key '=' value\n * key        -> [^=]*\n * value      -> '\"' [^\"]* '\"' | [^,]*\n */ var attributeSeparator = function attributeSeparator() {\n    var key = \"[^=]*\";\n    var value = '\"[^\"]*\"|[^,]*';\n    var keyvalue = \"(?:\" + key + \")=(?:\" + value + \")\";\n    return new RegExp(\"(?:^|,)(\" + keyvalue + \")\");\n};\n/**\n * Parse attributes from a line given the separator\n *\n * @param {string} attributes the attribute line to parse\n */ var parseAttributes = function parseAttributes(attributes) {\n    // split the string using attributes as the separator\n    var attrs = attributes.split(attributeSeparator());\n    var result = {};\n    var i = attrs.length;\n    var attr;\n    while(i--){\n        // filter out unmatched portions of the string\n        if (attrs[i] === \"\") {\n            continue;\n        } // split the key and value\n        attr = /([^=]*)=(.*)/.exec(attrs[i]).slice(1); // trim whitespace and remove optional quotes around the value\n        attr[0] = attr[0].replace(/^\\s+|\\s+$/g, \"\");\n        attr[1] = attr[1].replace(/^\\s+|\\s+$/g, \"\");\n        attr[1] = attr[1].replace(/^['\"](.*)['\"]$/g, \"$1\");\n        result[attr[0]] = attr[1];\n    }\n    return result;\n};\n/**\n * A line-level M3U8 parser event stream. It expects to receive input one\n * line at a time and performs a context-free parse of its contents. A stream\n * interpretation of a manifest can be useful if the manifest is expected to\n * be too large to fit comfortably into memory or the entirety of the input\n * is not immediately available. Otherwise, it's probably much easier to work\n * with a regular `Parser` object.\n *\n * Produces `data` events with an object that captures the parser's\n * interpretation of the input. That object has a property `tag` that is one\n * of `uri`, `comment`, or `tag`. URIs only have a single additional\n * property, `line`, which captures the entirety of the input without\n * interpretation. Comments similarly have a single additional property\n * `text` which is the input without the leading `#`.\n *\n * Tags always have a property `tagType` which is the lower-cased version of\n * the M3U8 directive without the `#EXT` or `#EXT-X-` prefix. For instance,\n * `#EXT-X-MEDIA-SEQUENCE` becomes `media-sequence` when parsed. Unrecognized\n * tags are given the tag type `unknown` and a single additional property\n * `data` with the remainder of the input.\n *\n * @class ParseStream\n * @extends Stream\n */ var ParseStream = /*#__PURE__*/ function(_Stream) {\n    _babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_0___default()(ParseStream, _Stream);\n    function ParseStream() {\n        var _this;\n        _this = _Stream.call(this) || this;\n        _this.customParsers = [];\n        _this.tagMappers = [];\n        return _this;\n    }\n    /**\n   * Parses an additional line of input.\n   *\n   * @param {string} line a single line of an M3U8 file to parse\n   */ var _proto = ParseStream.prototype;\n    _proto.push = function push(line) {\n        var _this2 = this;\n        var match;\n        var event; // strip whitespace\n        line = line.trim();\n        if (line.length === 0) {\n            // ignore empty lines\n            return;\n        } // URIs\n        if (line[0] !== \"#\") {\n            this.trigger(\"data\", {\n                type: \"uri\",\n                uri: line\n            });\n            return;\n        } // map tags\n        var newLines = this.tagMappers.reduce(function(acc, mapper) {\n            var mappedLine = mapper(line); // skip if unchanged\n            if (mappedLine === line) {\n                return acc;\n            }\n            return acc.concat([\n                mappedLine\n            ]);\n        }, [\n            line\n        ]);\n        newLines.forEach(function(newLine) {\n            for(var i = 0; i < _this2.customParsers.length; i++){\n                if (_this2.customParsers[i].call(_this2, newLine)) {\n                    return;\n                }\n            } // Comments\n            if (newLine.indexOf(\"#EXT\") !== 0) {\n                _this2.trigger(\"data\", {\n                    type: \"comment\",\n                    text: newLine.slice(1)\n                });\n                return;\n            } // strip off any carriage returns here so the regex matching\n            // doesn't have to account for them.\n            newLine = newLine.replace(\"\\r\", \"\"); // Tags\n            match = /^#EXTM3U/.exec(newLine);\n            if (match) {\n                _this2.trigger(\"data\", {\n                    type: \"tag\",\n                    tagType: \"m3u\"\n                });\n                return;\n            }\n            match = /^#EXTINF:?([0-9\\.]*)?,?(.*)?$/.exec(newLine);\n            if (match) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"inf\"\n                };\n                if (match[1]) {\n                    event.duration = parseFloat(match[1]);\n                }\n                if (match[2]) {\n                    event.title = match[2];\n                }\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(newLine);\n            if (match) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"targetduration\"\n                };\n                if (match[1]) {\n                    event.duration = parseInt(match[1], 10);\n                }\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-VERSION:?([0-9.]*)?/.exec(newLine);\n            if (match) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"version\"\n                };\n                if (match[1]) {\n                    event.version = parseInt(match[1], 10);\n                }\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-MEDIA-SEQUENCE:?(\\-?[0-9.]*)?/.exec(newLine);\n            if (match) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"media-sequence\"\n                };\n                if (match[1]) {\n                    event.number = parseInt(match[1], 10);\n                }\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-DISCONTINUITY-SEQUENCE:?(\\-?[0-9.]*)?/.exec(newLine);\n            if (match) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"discontinuity-sequence\"\n                };\n                if (match[1]) {\n                    event.number = parseInt(match[1], 10);\n                }\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(newLine);\n            if (match) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"playlist-type\"\n                };\n                if (match[1]) {\n                    event.playlistType = match[1];\n                }\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-BYTERANGE:?(.*)?$/.exec(newLine);\n            if (match) {\n                event = _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_2___default()(parseByterange(match[1]), {\n                    type: \"tag\",\n                    tagType: \"byterange\"\n                });\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(newLine);\n            if (match) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"allow-cache\"\n                };\n                if (match[1]) {\n                    event.allowed = !/NO/.test(match[1]);\n                }\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-MAP:?(.*)$/.exec(newLine);\n            if (match) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"map\"\n                };\n                if (match[1]) {\n                    var attributes = parseAttributes(match[1]);\n                    if (attributes.URI) {\n                        event.uri = attributes.URI;\n                    }\n                    if (attributes.BYTERANGE) {\n                        event.byterange = parseByterange(attributes.BYTERANGE);\n                    }\n                }\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-STREAM-INF:?(.*)$/.exec(newLine);\n            if (match) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"stream-inf\"\n                };\n                if (match[1]) {\n                    event.attributes = parseAttributes(match[1]);\n                    if (event.attributes.RESOLUTION) {\n                        var split = event.attributes.RESOLUTION.split(\"x\");\n                        var resolution = {};\n                        if (split[0]) {\n                            resolution.width = parseInt(split[0], 10);\n                        }\n                        if (split[1]) {\n                            resolution.height = parseInt(split[1], 10);\n                        }\n                        event.attributes.RESOLUTION = resolution;\n                    }\n                    if (event.attributes.BANDWIDTH) {\n                        event.attributes.BANDWIDTH = parseInt(event.attributes.BANDWIDTH, 10);\n                    }\n                    if (event.attributes[\"FRAME-RATE\"]) {\n                        event.attributes[\"FRAME-RATE\"] = parseFloat(event.attributes[\"FRAME-RATE\"]);\n                    }\n                    if (event.attributes[\"PROGRAM-ID\"]) {\n                        event.attributes[\"PROGRAM-ID\"] = parseInt(event.attributes[\"PROGRAM-ID\"], 10);\n                    }\n                }\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-MEDIA:?(.*)$/.exec(newLine);\n            if (match) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"media\"\n                };\n                if (match[1]) {\n                    event.attributes = parseAttributes(match[1]);\n                }\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-ENDLIST/.exec(newLine);\n            if (match) {\n                _this2.trigger(\"data\", {\n                    type: \"tag\",\n                    tagType: \"endlist\"\n                });\n                return;\n            }\n            match = /^#EXT-X-DISCONTINUITY/.exec(newLine);\n            if (match) {\n                _this2.trigger(\"data\", {\n                    type: \"tag\",\n                    tagType: \"discontinuity\"\n                });\n                return;\n            }\n            match = /^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(newLine);\n            if (match) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"program-date-time\"\n                };\n                if (match[1]) {\n                    event.dateTimeString = match[1];\n                    event.dateTimeObject = new Date(match[1]);\n                }\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-KEY:?(.*)$/.exec(newLine);\n            if (match) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"key\"\n                };\n                if (match[1]) {\n                    event.attributes = parseAttributes(match[1]); // parse the IV string into a Uint32Array\n                    if (event.attributes.IV) {\n                        if (event.attributes.IV.substring(0, 2).toLowerCase() === \"0x\") {\n                            event.attributes.IV = event.attributes.IV.substring(2);\n                        }\n                        event.attributes.IV = event.attributes.IV.match(/.{8}/g);\n                        event.attributes.IV[0] = parseInt(event.attributes.IV[0], 16);\n                        event.attributes.IV[1] = parseInt(event.attributes.IV[1], 16);\n                        event.attributes.IV[2] = parseInt(event.attributes.IV[2], 16);\n                        event.attributes.IV[3] = parseInt(event.attributes.IV[3], 16);\n                        event.attributes.IV = new Uint32Array(event.attributes.IV);\n                    }\n                }\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-START:?(.*)$/.exec(newLine);\n            if (match) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"start\"\n                };\n                if (match[1]) {\n                    event.attributes = parseAttributes(match[1]);\n                    event.attributes[\"TIME-OFFSET\"] = parseFloat(event.attributes[\"TIME-OFFSET\"]);\n                    event.attributes.PRECISE = /YES/.test(event.attributes.PRECISE);\n                }\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(newLine);\n            if (match) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"cue-out-cont\"\n                };\n                if (match[1]) {\n                    event.data = match[1];\n                } else {\n                    event.data = \"\";\n                }\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-CUE-OUT:?(.*)?$/.exec(newLine);\n            if (match) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"cue-out\"\n                };\n                if (match[1]) {\n                    event.data = match[1];\n                } else {\n                    event.data = \"\";\n                }\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-CUE-IN:?(.*)?$/.exec(newLine);\n            if (match) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"cue-in\"\n                };\n                if (match[1]) {\n                    event.data = match[1];\n                } else {\n                    event.data = \"\";\n                }\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-SKIP:(.*)$/.exec(newLine);\n            if (match && match[1]) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"skip\"\n                };\n                event.attributes = parseAttributes(match[1]);\n                if (event.attributes.hasOwnProperty(\"SKIPPED-SEGMENTS\")) {\n                    event.attributes[\"SKIPPED-SEGMENTS\"] = parseInt(event.attributes[\"SKIPPED-SEGMENTS\"], 10);\n                }\n                if (event.attributes.hasOwnProperty(\"RECENTLY-REMOVED-DATERANGES\")) {\n                    event.attributes[\"RECENTLY-REMOVED-DATERANGES\"] = event.attributes[\"RECENTLY-REMOVED-DATERANGES\"].split(TAB);\n                }\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-PART:(.*)$/.exec(newLine);\n            if (match && match[1]) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"part\"\n                };\n                event.attributes = parseAttributes(match[1]);\n                [\n                    \"DURATION\"\n                ].forEach(function(key) {\n                    if (event.attributes.hasOwnProperty(key)) {\n                        event.attributes[key] = parseFloat(event.attributes[key]);\n                    }\n                });\n                [\n                    \"INDEPENDENT\",\n                    \"GAP\"\n                ].forEach(function(key) {\n                    if (event.attributes.hasOwnProperty(key)) {\n                        event.attributes[key] = /YES/.test(event.attributes[key]);\n                    }\n                });\n                if (event.attributes.hasOwnProperty(\"BYTERANGE\")) {\n                    event.attributes.byterange = parseByterange(event.attributes.BYTERANGE);\n                }\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-SERVER-CONTROL:(.*)$/.exec(newLine);\n            if (match && match[1]) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"server-control\"\n                };\n                event.attributes = parseAttributes(match[1]);\n                [\n                    \"CAN-SKIP-UNTIL\",\n                    \"PART-HOLD-BACK\",\n                    \"HOLD-BACK\"\n                ].forEach(function(key) {\n                    if (event.attributes.hasOwnProperty(key)) {\n                        event.attributes[key] = parseFloat(event.attributes[key]);\n                    }\n                });\n                [\n                    \"CAN-SKIP-DATERANGES\",\n                    \"CAN-BLOCK-RELOAD\"\n                ].forEach(function(key) {\n                    if (event.attributes.hasOwnProperty(key)) {\n                        event.attributes[key] = /YES/.test(event.attributes[key]);\n                    }\n                });\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-PART-INF:(.*)$/.exec(newLine);\n            if (match && match[1]) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"part-inf\"\n                };\n                event.attributes = parseAttributes(match[1]);\n                [\n                    \"PART-TARGET\"\n                ].forEach(function(key) {\n                    if (event.attributes.hasOwnProperty(key)) {\n                        event.attributes[key] = parseFloat(event.attributes[key]);\n                    }\n                });\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-PRELOAD-HINT:(.*)$/.exec(newLine);\n            if (match && match[1]) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"preload-hint\"\n                };\n                event.attributes = parseAttributes(match[1]);\n                [\n                    \"BYTERANGE-START\",\n                    \"BYTERANGE-LENGTH\"\n                ].forEach(function(key) {\n                    if (event.attributes.hasOwnProperty(key)) {\n                        event.attributes[key] = parseInt(event.attributes[key], 10);\n                        var subkey = key === \"BYTERANGE-LENGTH\" ? \"length\" : \"offset\";\n                        event.attributes.byterange = event.attributes.byterange || {};\n                        event.attributes.byterange[subkey] = event.attributes[key]; // only keep the parsed byterange object.\n                        delete event.attributes[key];\n                    }\n                });\n                _this2.trigger(\"data\", event);\n                return;\n            }\n            match = /^#EXT-X-RENDITION-REPORT:(.*)$/.exec(newLine);\n            if (match && match[1]) {\n                event = {\n                    type: \"tag\",\n                    tagType: \"rendition-report\"\n                };\n                event.attributes = parseAttributes(match[1]);\n                [\n                    \"LAST-MSN\",\n                    \"LAST-PART\"\n                ].forEach(function(key) {\n                    if (event.attributes.hasOwnProperty(key)) {\n                        event.attributes[key] = parseInt(event.attributes[key], 10);\n                    }\n                });\n                _this2.trigger(\"data\", event);\n                return;\n            } // unknown tag type\n            _this2.trigger(\"data\", {\n                type: \"tag\",\n                data: newLine.slice(4)\n            });\n        });\n    } /**\n   * Add a parser for custom headers\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.customType   the custom type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */ ;\n    _proto.addParser = function addParser(_ref) {\n        var _this3 = this;\n        var expression = _ref.expression, customType = _ref.customType, dataParser = _ref.dataParser, segment = _ref.segment;\n        if (typeof dataParser !== \"function\") {\n            dataParser = function dataParser(line) {\n                return line;\n            };\n        }\n        this.customParsers.push(function(line) {\n            var match = expression.exec(line);\n            if (match) {\n                _this3.trigger(\"data\", {\n                    type: \"custom\",\n                    data: dataParser(line),\n                    customType: customType,\n                    segment: segment\n                });\n                return true;\n            }\n        });\n    } /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */ ;\n    _proto.addTagMapper = function addTagMapper(_ref2) {\n        var expression = _ref2.expression, map = _ref2.map;\n        var mapFn = function mapFn(line) {\n            if (expression.test(line)) {\n                return map(line);\n            }\n            return line;\n        };\n        this.tagMappers.push(mapFn);\n    };\n    return ParseStream;\n}(_videojs_vhs_utils_es_stream_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\nvar camelCase = function camelCase(str) {\n    return str.toLowerCase().replace(/-(\\w)/g, function(a) {\n        return a[1].toUpperCase();\n    });\n};\nvar camelCaseKeys = function camelCaseKeys(attributes) {\n    var result = {};\n    Object.keys(attributes).forEach(function(key) {\n        result[camelCase(key)] = attributes[key];\n    });\n    return result;\n}; // set SERVER-CONTROL hold back based upon targetDuration and partTargetDuration\n// we need this helper because defaults are based upon targetDuration and\n// partTargetDuration being set, but they may not be if SERVER-CONTROL appears before\n// target durations are set.\nvar setHoldBack = function setHoldBack(manifest) {\n    var serverControl = manifest.serverControl, targetDuration = manifest.targetDuration, partTargetDuration = manifest.partTargetDuration;\n    if (!serverControl) {\n        return;\n    }\n    var tag = \"#EXT-X-SERVER-CONTROL\";\n    var hb = \"holdBack\";\n    var phb = \"partHoldBack\";\n    var minTargetDuration = targetDuration && targetDuration * 3;\n    var minPartDuration = partTargetDuration && partTargetDuration * 2;\n    if (targetDuration && !serverControl.hasOwnProperty(hb)) {\n        serverControl[hb] = minTargetDuration;\n        this.trigger(\"info\", {\n            message: tag + \" defaulting HOLD-BACK to targetDuration * 3 (\" + minTargetDuration + \").\"\n        });\n    }\n    if (minTargetDuration && serverControl[hb] < minTargetDuration) {\n        this.trigger(\"warn\", {\n            message: tag + \" clamping HOLD-BACK (\" + serverControl[hb] + \") to targetDuration * 3 (\" + minTargetDuration + \")\"\n        });\n        serverControl[hb] = minTargetDuration;\n    } // default no part hold back to part target duration * 3\n    if (partTargetDuration && !serverControl.hasOwnProperty(phb)) {\n        serverControl[phb] = partTargetDuration * 3;\n        this.trigger(\"info\", {\n            message: tag + \" defaulting PART-HOLD-BACK to partTargetDuration * 3 (\" + serverControl[phb] + \").\"\n        });\n    } // if part hold back is too small default it to part target duration * 2\n    if (partTargetDuration && serverControl[phb] < minPartDuration) {\n        this.trigger(\"warn\", {\n            message: tag + \" clamping PART-HOLD-BACK (\" + serverControl[phb] + \") to partTargetDuration * 2 (\" + minPartDuration + \").\"\n        });\n        serverControl[phb] = minPartDuration;\n    }\n};\n/**\n * A parser for M3U8 files. The current interpretation of the input is\n * exposed as a property `manifest` on parser objects. It's just two lines to\n * create and parse a manifest once you have the contents available as a string:\n *\n * ```js\n * var parser = new m3u8.Parser();\n * parser.push(xhr.responseText);\n * ```\n *\n * New input can later be applied to update the manifest object by calling\n * `push` again.\n *\n * The parser attempts to create a usable manifest object even if the\n * underlying input is somewhat nonsensical. It emits `info` and `warning`\n * events during the parse if it encounters input that seems invalid or\n * requires some property of the manifest object to be defaulted.\n *\n * @class Parser\n * @extends Stream\n */ var Parser = /*#__PURE__*/ function(_Stream) {\n    _babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_0___default()(Parser, _Stream);\n    function Parser() {\n        var _this;\n        _this = _Stream.call(this) || this;\n        _this.lineStream = new LineStream();\n        _this.parseStream = new ParseStream();\n        _this.lineStream.pipe(_this.parseStream);\n        /* eslint-disable consistent-this */ var self = _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(_this);\n        /* eslint-enable consistent-this */ var uris = [];\n        var currentUri = {}; // if specified, the active EXT-X-MAP definition\n        var currentMap; // if specified, the active decryption key\n        var _key;\n        var hasParts = false;\n        var noop = function noop() {};\n        var defaultMediaGroups = {\n            \"AUDIO\": {},\n            \"VIDEO\": {},\n            \"CLOSED-CAPTIONS\": {},\n            \"SUBTITLES\": {}\n        }; // This is the Widevine UUID from DASH IF IOP. The same exact string is\n        // used in MPDs with Widevine encrypted streams.\n        var widevineUuid = \"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed\"; // group segments into numbered timelines delineated by discontinuities\n        var currentTimeline = 0; // the manifest is empty until the parse stream begins delivering data\n        _this.manifest = {\n            allowCache: true,\n            discontinuityStarts: [],\n            segments: []\n        }; // keep track of the last seen segment's byte range end, as segments are not required\n        // to provide the offset, in which case it defaults to the next byte after the\n        // previous segment\n        var lastByterangeEnd = 0; // keep track of the last seen part's byte range end.\n        var lastPartByterangeEnd = 0;\n        _this.on(\"end\", function() {\n            // only add preloadSegment if we don't yet have a uri for it.\n            // and we actually have parts/preloadHints\n            if (currentUri.uri || !currentUri.parts && !currentUri.preloadHints) {\n                return;\n            }\n            if (!currentUri.map && currentMap) {\n                currentUri.map = currentMap;\n            }\n            if (!currentUri.key && _key) {\n                currentUri.key = _key;\n            }\n            if (!currentUri.timeline && typeof currentTimeline === \"number\") {\n                currentUri.timeline = currentTimeline;\n            }\n            _this.manifest.preloadSegment = currentUri;\n        }); // update the manifest with the m3u8 entry from the parse stream\n        _this.parseStream.on(\"data\", function(entry) {\n            var mediaGroup;\n            var rendition;\n            ({\n                tag: function tag() {\n                    // switch based on the tag type\n                    (({\n                        version: function version() {\n                            if (entry.version) {\n                                this.manifest.version = entry.version;\n                            }\n                        },\n                        \"allow-cache\": function allowCache() {\n                            this.manifest.allowCache = entry.allowed;\n                            if (!(\"allowed\" in entry)) {\n                                this.trigger(\"info\", {\n                                    message: \"defaulting allowCache to YES\"\n                                });\n                                this.manifest.allowCache = true;\n                            }\n                        },\n                        byterange: function byterange() {\n                            var byterange = {};\n                            if (\"length\" in entry) {\n                                currentUri.byterange = byterange;\n                                byterange.length = entry.length;\n                                if (!(\"offset\" in entry)) {\n                                    /*\n                   * From the latest spec (as of this writing):\n                   * https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.2.2\n                   *\n                   * Same text since EXT-X-BYTERANGE's introduction in draft 7:\n                   * https://tools.ietf.org/html/draft-pantos-http-live-streaming-07#section-3.3.1)\n                   *\n                   * \"If o [offset] is not present, the sub-range begins at the next byte\n                   * following the sub-range of the previous media segment.\"\n                   */ entry.offset = lastByterangeEnd;\n                                }\n                            }\n                            if (\"offset\" in entry) {\n                                currentUri.byterange = byterange;\n                                byterange.offset = entry.offset;\n                            }\n                            lastByterangeEnd = byterange.offset + byterange.length;\n                        },\n                        endlist: function endlist() {\n                            this.manifest.endList = true;\n                        },\n                        inf: function inf() {\n                            if (!(\"mediaSequence\" in this.manifest)) {\n                                this.manifest.mediaSequence = 0;\n                                this.trigger(\"info\", {\n                                    message: \"defaulting media sequence to zero\"\n                                });\n                            }\n                            if (!(\"discontinuitySequence\" in this.manifest)) {\n                                this.manifest.discontinuitySequence = 0;\n                                this.trigger(\"info\", {\n                                    message: \"defaulting discontinuity sequence to zero\"\n                                });\n                            }\n                            if (entry.duration > 0) {\n                                currentUri.duration = entry.duration;\n                            }\n                            if (entry.duration === 0) {\n                                currentUri.duration = 0.01;\n                                this.trigger(\"info\", {\n                                    message: \"updating zero segment duration to a small value\"\n                                });\n                            }\n                            this.manifest.segments = uris;\n                        },\n                        key: function key() {\n                            if (!entry.attributes) {\n                                this.trigger(\"warn\", {\n                                    message: \"ignoring key declaration without attribute list\"\n                                });\n                                return;\n                            } // clear the active encryption key\n                            if (entry.attributes.METHOD === \"NONE\") {\n                                _key = null;\n                                return;\n                            }\n                            if (!entry.attributes.URI) {\n                                this.trigger(\"warn\", {\n                                    message: \"ignoring key declaration without URI\"\n                                });\n                                return;\n                            }\n                            if (entry.attributes.KEYFORMAT === \"com.apple.streamingkeydelivery\") {\n                                this.manifest.contentProtection = this.manifest.contentProtection || {}; // TODO: add full support for this.\n                                this.manifest.contentProtection[\"com.apple.fps.1_0\"] = {\n                                    attributes: entry.attributes\n                                };\n                                return;\n                            }\n                            if (entry.attributes.KEYFORMAT === \"com.microsoft.playready\") {\n                                this.manifest.contentProtection = this.manifest.contentProtection || {}; // TODO: add full support for this.\n                                this.manifest.contentProtection[\"com.microsoft.playready\"] = {\n                                    uri: entry.attributes.URI\n                                };\n                                return;\n                            } // check if the content is encrypted for Widevine\n                            // Widevine/HLS spec: https://storage.googleapis.com/wvdocs/Widevine_DRM_HLS.pdf\n                            if (entry.attributes.KEYFORMAT === widevineUuid) {\n                                var VALID_METHODS = [\n                                    \"SAMPLE-AES\",\n                                    \"SAMPLE-AES-CTR\",\n                                    \"SAMPLE-AES-CENC\"\n                                ];\n                                if (VALID_METHODS.indexOf(entry.attributes.METHOD) === -1) {\n                                    this.trigger(\"warn\", {\n                                        message: \"invalid key method provided for Widevine\"\n                                    });\n                                    return;\n                                }\n                                if (entry.attributes.METHOD === \"SAMPLE-AES-CENC\") {\n                                    this.trigger(\"warn\", {\n                                        message: \"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead\"\n                                    });\n                                }\n                                if (entry.attributes.URI.substring(0, 23) !== \"data:text/plain;base64,\") {\n                                    this.trigger(\"warn\", {\n                                        message: \"invalid key URI provided for Widevine\"\n                                    });\n                                    return;\n                                }\n                                if (!(entry.attributes.KEYID && entry.attributes.KEYID.substring(0, 2) === \"0x\")) {\n                                    this.trigger(\"warn\", {\n                                        message: \"invalid key ID provided for Widevine\"\n                                    });\n                                    return;\n                                } // if Widevine key attributes are valid, store them as `contentProtection`\n                                // on the manifest to emulate Widevine tag structure in a DASH mpd\n                                this.manifest.contentProtection = this.manifest.contentProtection || {};\n                                this.manifest.contentProtection[\"com.widevine.alpha\"] = {\n                                    attributes: {\n                                        schemeIdUri: entry.attributes.KEYFORMAT,\n                                        // remove '0x' from the key id string\n                                        keyId: entry.attributes.KEYID.substring(2)\n                                    },\n                                    // decode the base64-encoded PSSH box\n                                    pssh: (0,_videojs_vhs_utils_es_decode_b64_to_uint8_array_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(entry.attributes.URI.split(\",\")[1])\n                                };\n                                return;\n                            }\n                            if (!entry.attributes.METHOD) {\n                                this.trigger(\"warn\", {\n                                    message: \"defaulting key method to AES-128\"\n                                });\n                            } // setup an encryption key for upcoming segments\n                            _key = {\n                                method: entry.attributes.METHOD || \"AES-128\",\n                                uri: entry.attributes.URI\n                            };\n                            if (typeof entry.attributes.IV !== \"undefined\") {\n                                _key.iv = entry.attributes.IV;\n                            }\n                        },\n                        \"media-sequence\": function mediaSequence() {\n                            if (!isFinite(entry.number)) {\n                                this.trigger(\"warn\", {\n                                    message: \"ignoring invalid media sequence: \" + entry.number\n                                });\n                                return;\n                            }\n                            this.manifest.mediaSequence = entry.number;\n                        },\n                        \"discontinuity-sequence\": function discontinuitySequence() {\n                            if (!isFinite(entry.number)) {\n                                this.trigger(\"warn\", {\n                                    message: \"ignoring invalid discontinuity sequence: \" + entry.number\n                                });\n                                return;\n                            }\n                            this.manifest.discontinuitySequence = entry.number;\n                            currentTimeline = entry.number;\n                        },\n                        \"playlist-type\": function playlistType() {\n                            if (!/VOD|EVENT/.test(entry.playlistType)) {\n                                this.trigger(\"warn\", {\n                                    message: \"ignoring unknown playlist type: \" + entry.playlist\n                                });\n                                return;\n                            }\n                            this.manifest.playlistType = entry.playlistType;\n                        },\n                        map: function map() {\n                            currentMap = {};\n                            if (entry.uri) {\n                                currentMap.uri = entry.uri;\n                            }\n                            if (entry.byterange) {\n                                currentMap.byterange = entry.byterange;\n                            }\n                            if (_key) {\n                                currentMap.key = _key;\n                            }\n                        },\n                        \"stream-inf\": function streamInf() {\n                            this.manifest.playlists = uris;\n                            this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n                            if (!entry.attributes) {\n                                this.trigger(\"warn\", {\n                                    message: \"ignoring empty stream-inf attributes\"\n                                });\n                                return;\n                            }\n                            if (!currentUri.attributes) {\n                                currentUri.attributes = {};\n                            }\n                            _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_2___default()(currentUri.attributes, entry.attributes);\n                        },\n                        media: function media() {\n                            this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n                            if (!(entry.attributes && entry.attributes.TYPE && entry.attributes[\"GROUP-ID\"] && entry.attributes.NAME)) {\n                                this.trigger(\"warn\", {\n                                    message: \"ignoring incomplete or missing media group\"\n                                });\n                                return;\n                            } // find the media group, creating defaults as necessary\n                            var mediaGroupType = this.manifest.mediaGroups[entry.attributes.TYPE];\n                            mediaGroupType[entry.attributes[\"GROUP-ID\"]] = mediaGroupType[entry.attributes[\"GROUP-ID\"]] || {};\n                            mediaGroup = mediaGroupType[entry.attributes[\"GROUP-ID\"]]; // collect the rendition metadata\n                            rendition = {\n                                default: /yes/i.test(entry.attributes.DEFAULT)\n                            };\n                            if (rendition.default) {\n                                rendition.autoselect = true;\n                            } else {\n                                rendition.autoselect = /yes/i.test(entry.attributes.AUTOSELECT);\n                            }\n                            if (entry.attributes.LANGUAGE) {\n                                rendition.language = entry.attributes.LANGUAGE;\n                            }\n                            if (entry.attributes.URI) {\n                                rendition.uri = entry.attributes.URI;\n                            }\n                            if (entry.attributes[\"INSTREAM-ID\"]) {\n                                rendition.instreamId = entry.attributes[\"INSTREAM-ID\"];\n                            }\n                            if (entry.attributes.CHARACTERISTICS) {\n                                rendition.characteristics = entry.attributes.CHARACTERISTICS;\n                            }\n                            if (entry.attributes.FORCED) {\n                                rendition.forced = /yes/i.test(entry.attributes.FORCED);\n                            } // insert the new rendition\n                            mediaGroup[entry.attributes.NAME] = rendition;\n                        },\n                        discontinuity: function discontinuity() {\n                            currentTimeline += 1;\n                            currentUri.discontinuity = true;\n                            this.manifest.discontinuityStarts.push(uris.length);\n                        },\n                        \"program-date-time\": function programDateTime() {\n                            if (typeof this.manifest.dateTimeString === \"undefined\") {\n                                // PROGRAM-DATE-TIME is a media-segment tag, but for backwards\n                                // compatibility, we add the first occurence of the PROGRAM-DATE-TIME tag\n                                // to the manifest object\n                                // TODO: Consider removing this in future major version\n                                this.manifest.dateTimeString = entry.dateTimeString;\n                                this.manifest.dateTimeObject = entry.dateTimeObject;\n                            }\n                            currentUri.dateTimeString = entry.dateTimeString;\n                            currentUri.dateTimeObject = entry.dateTimeObject;\n                        },\n                        targetduration: function targetduration() {\n                            if (!isFinite(entry.duration) || entry.duration < 0) {\n                                this.trigger(\"warn\", {\n                                    message: \"ignoring invalid target duration: \" + entry.duration\n                                });\n                                return;\n                            }\n                            this.manifest.targetDuration = entry.duration;\n                            setHoldBack.call(this, this.manifest);\n                        },\n                        start: function start() {\n                            if (!entry.attributes || isNaN(entry.attributes[\"TIME-OFFSET\"])) {\n                                this.trigger(\"warn\", {\n                                    message: \"ignoring start declaration without appropriate attribute list\"\n                                });\n                                return;\n                            }\n                            this.manifest.start = {\n                                timeOffset: entry.attributes[\"TIME-OFFSET\"],\n                                precise: entry.attributes.PRECISE\n                            };\n                        },\n                        \"cue-out\": function cueOut() {\n                            currentUri.cueOut = entry.data;\n                        },\n                        \"cue-out-cont\": function cueOutCont() {\n                            currentUri.cueOutCont = entry.data;\n                        },\n                        \"cue-in\": function cueIn() {\n                            currentUri.cueIn = entry.data;\n                        },\n                        \"skip\": function skip() {\n                            this.manifest.skip = camelCaseKeys(entry.attributes);\n                            this.warnOnMissingAttributes_(\"#EXT-X-SKIP\", entry.attributes, [\n                                \"SKIPPED-SEGMENTS\"\n                            ]);\n                        },\n                        \"part\": function part() {\n                            var _this2 = this;\n                            hasParts = true; // parts are always specifed before a segment\n                            var segmentIndex = this.manifest.segments.length;\n                            var part = camelCaseKeys(entry.attributes);\n                            currentUri.parts = currentUri.parts || [];\n                            currentUri.parts.push(part);\n                            if (part.byterange) {\n                                if (!part.byterange.hasOwnProperty(\"offset\")) {\n                                    part.byterange.offset = lastPartByterangeEnd;\n                                }\n                                lastPartByterangeEnd = part.byterange.offset + part.byterange.length;\n                            }\n                            var partIndex = currentUri.parts.length - 1;\n                            this.warnOnMissingAttributes_(\"#EXT-X-PART #\" + partIndex + \" for segment #\" + segmentIndex, entry.attributes, [\n                                \"URI\",\n                                \"DURATION\"\n                            ]);\n                            if (this.manifest.renditionReports) {\n                                this.manifest.renditionReports.forEach(function(r, i) {\n                                    if (!r.hasOwnProperty(\"lastPart\")) {\n                                        _this2.trigger(\"warn\", {\n                                            message: \"#EXT-X-RENDITION-REPORT #\" + i + \" lacks required attribute(s): LAST-PART\"\n                                        });\n                                    }\n                                });\n                            }\n                        },\n                        \"server-control\": function serverControl() {\n                            var attrs = this.manifest.serverControl = camelCaseKeys(entry.attributes);\n                            if (!attrs.hasOwnProperty(\"canBlockReload\")) {\n                                attrs.canBlockReload = false;\n                                this.trigger(\"info\", {\n                                    message: \"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false\"\n                                });\n                            }\n                            setHoldBack.call(this, this.manifest);\n                            if (attrs.canSkipDateranges && !attrs.hasOwnProperty(\"canSkipUntil\")) {\n                                this.trigger(\"warn\", {\n                                    message: \"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set\"\n                                });\n                            }\n                        },\n                        \"preload-hint\": function preloadHint() {\n                            // parts are always specifed before a segment\n                            var segmentIndex = this.manifest.segments.length;\n                            var hint = camelCaseKeys(entry.attributes);\n                            var isPart = hint.type && hint.type === \"PART\";\n                            currentUri.preloadHints = currentUri.preloadHints || [];\n                            currentUri.preloadHints.push(hint);\n                            if (hint.byterange) {\n                                if (!hint.byterange.hasOwnProperty(\"offset\")) {\n                                    // use last part byterange end or zero if not a part.\n                                    hint.byterange.offset = isPart ? lastPartByterangeEnd : 0;\n                                    if (isPart) {\n                                        lastPartByterangeEnd = hint.byterange.offset + hint.byterange.length;\n                                    }\n                                }\n                            }\n                            var index = currentUri.preloadHints.length - 1;\n                            this.warnOnMissingAttributes_(\"#EXT-X-PRELOAD-HINT #\" + index + \" for segment #\" + segmentIndex, entry.attributes, [\n                                \"TYPE\",\n                                \"URI\"\n                            ]);\n                            if (!hint.type) {\n                                return;\n                            } // search through all preload hints except for the current one for\n                            // a duplicate type.\n                            for(var i = 0; i < currentUri.preloadHints.length - 1; i++){\n                                var otherHint = currentUri.preloadHints[i];\n                                if (!otherHint.type) {\n                                    continue;\n                                }\n                                if (otherHint.type === hint.type) {\n                                    this.trigger(\"warn\", {\n                                        message: \"#EXT-X-PRELOAD-HINT #\" + index + \" for segment #\" + segmentIndex + \" has the same TYPE \" + hint.type + \" as preload hint #\" + i\n                                    });\n                                }\n                            }\n                        },\n                        \"rendition-report\": function renditionReport() {\n                            var report = camelCaseKeys(entry.attributes);\n                            this.manifest.renditionReports = this.manifest.renditionReports || [];\n                            this.manifest.renditionReports.push(report);\n                            var index = this.manifest.renditionReports.length - 1;\n                            var required = [\n                                \"LAST-MSN\",\n                                \"URI\"\n                            ];\n                            if (hasParts) {\n                                required.push(\"LAST-PART\");\n                            }\n                            this.warnOnMissingAttributes_(\"#EXT-X-RENDITION-REPORT #\" + index, entry.attributes, required);\n                        },\n                        \"part-inf\": function partInf() {\n                            this.manifest.partInf = camelCaseKeys(entry.attributes);\n                            this.warnOnMissingAttributes_(\"#EXT-X-PART-INF\", entry.attributes, [\n                                \"PART-TARGET\"\n                            ]);\n                            if (this.manifest.partInf.partTarget) {\n                                this.manifest.partTargetDuration = this.manifest.partInf.partTarget;\n                            }\n                            setHoldBack.call(this, this.manifest);\n                        }\n                    })[entry.tagType] || noop).call(self);\n                },\n                uri: function uri() {\n                    currentUri.uri = entry.uri;\n                    uris.push(currentUri); // if no explicit duration was declared, use the target duration\n                    if (this.manifest.targetDuration && !(\"duration\" in currentUri)) {\n                        this.trigger(\"warn\", {\n                            message: \"defaulting segment duration to the target duration\"\n                        });\n                        currentUri.duration = this.manifest.targetDuration;\n                    } // annotate with encryption information, if necessary\n                    if (_key) {\n                        currentUri.key = _key;\n                    }\n                    currentUri.timeline = currentTimeline; // annotate with initialization segment information, if necessary\n                    if (currentMap) {\n                        currentUri.map = currentMap;\n                    } // reset the last byterange end as it needs to be 0 between parts\n                    lastPartByterangeEnd = 0; // prepare for the next URI\n                    currentUri = {};\n                },\n                comment: function comment() {},\n                custom: function custom() {\n                    // if this is segment-level data attach the output to the segment\n                    if (entry.segment) {\n                        currentUri.custom = currentUri.custom || {};\n                        currentUri.custom[entry.customType] = entry.data; // if this is manifest-level data attach to the top level manifest object\n                    } else {\n                        this.manifest.custom = this.manifest.custom || {};\n                        this.manifest.custom[entry.customType] = entry.data;\n                    }\n                }\n            })[entry.type].call(self);\n        });\n        return _this;\n    }\n    var _proto = Parser.prototype;\n    _proto.warnOnMissingAttributes_ = function warnOnMissingAttributes_(identifier, attributes, required) {\n        var missing = [];\n        required.forEach(function(key) {\n            if (!attributes.hasOwnProperty(key)) {\n                missing.push(key);\n            }\n        });\n        if (missing.length) {\n            this.trigger(\"warn\", {\n                message: identifier + \" lacks required attribute(s): \" + missing.join(\", \")\n            });\n        }\n    } /**\n   * Parse the input string and update the manifest object.\n   *\n   * @param {string} chunk a potentially incomplete portion of the manifest\n   */ ;\n    _proto.push = function push(chunk) {\n        this.lineStream.push(chunk);\n    } /**\n   * Flush any remaining input. This can be handy if the last line of an M3U8\n   * manifest did not contain a trailing newline but the file has been\n   * completely received.\n   */ ;\n    _proto.end = function end() {\n        // flush any buffered input\n        this.lineStream.push(\"\\n\");\n        this.trigger(\"end\");\n    } /**\n   * Add an additional parser for non-standard tags\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.type         the type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */ ;\n    _proto.addParser = function addParser(options) {\n        this.parseStream.addParser(options);\n    } /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */ ;\n    _proto.addTagMapper = function addTagMapper(options) {\n        this.parseStream.addTagMapper(options);\n    };\n    return Parser;\n}(_videojs_vhs_utils_es_stream_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vbm9kZV9tb2R1bGVzL20zdTgtcGFyc2VyL2Rpc3QvbTN1OC1wYXJzZXIuZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQSx5REFBeUQsR0FDUztBQUNiO0FBQ0M7QUFDNEI7QUFDSztBQUV2Rjs7Ozs7O0NBTUMsR0FFRCxJQUFJSyxhQUFhLFdBQVcsR0FBRSxTQUFVQyxPQUFPO0lBQzdDTiwyRUFBY0EsQ0FBQ0ssWUFBWUM7SUFFM0IsU0FBU0Q7UUFDUCxJQUFJRTtRQUVKQSxRQUFRRCxRQUFRRSxJQUFJLENBQUMsSUFBSSxLQUFLLElBQUk7UUFDbENELE1BQU1FLE1BQU0sR0FBRztRQUNmLE9BQU9GO0lBQ1Q7SUFDQTs7OztHQUlDLEdBR0QsSUFBSUcsU0FBU0wsV0FBV00sU0FBUztJQUVqQ0QsT0FBT0UsSUFBSSxHQUFHLFNBQVNBLEtBQUtDLElBQUk7UUFDOUIsSUFBSUM7UUFDSixJQUFJLENBQUNMLE1BQU0sSUFBSUk7UUFDZkMsY0FBYyxJQUFJLENBQUNMLE1BQU0sQ0FBQ00sT0FBTyxDQUFDO1FBRWxDLE1BQU9ELGNBQWMsQ0FBQyxHQUFHQSxjQUFjLElBQUksQ0FBQ0wsTUFBTSxDQUFDTSxPQUFPLENBQUMsTUFBTztZQUNoRSxJQUFJLENBQUNDLE9BQU8sQ0FBQyxRQUFRLElBQUksQ0FBQ1AsTUFBTSxDQUFDUSxTQUFTLENBQUMsR0FBR0g7WUFDOUMsSUFBSSxDQUFDTCxNQUFNLEdBQUcsSUFBSSxDQUFDQSxNQUFNLENBQUNRLFNBQVMsQ0FBQ0gsY0FBYztRQUNwRDtJQUNGO0lBRUEsT0FBT1Q7QUFDVCxFQUFFSix1RUFBTUE7QUFFUixJQUFJaUIsTUFBTUMsT0FBT0MsWUFBWSxDQUFDO0FBRTlCLElBQUlDLGlCQUFpQixTQUFTQSxlQUFlQyxlQUFlO0lBQzFELG9EQUFvRDtJQUNwRCxtREFBbUQ7SUFDbkQsSUFBSUMsUUFBUSx5QkFBeUJDLElBQUksQ0FBQ0YsbUJBQW1CO0lBQzdELElBQUlHLFNBQVMsQ0FBQztJQUVk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LFVBQVUsRUFBRTtRQUNoQk4sU0FBU2xKLE9BQU8sQ0FBQyxTQUFVM0IsR0FBRztZQUM1QixJQUFJLENBQUNLLFdBQVdpRCxjQUFjLENBQUN0RCxNQUFNO2dCQUNuQ21MLFFBQVFyTSxJQUFJLENBQUNrQjtZQUNmO1FBQ0Y7UUFFQSxJQUFJbUwsUUFBUXZMLE1BQU0sRUFBRTtZQUNsQixJQUFJLENBQUNWLE9BQU8sQ0FBQyxRQUFRO2dCQUNuQmtHLFNBQVM4RixhQUFhLG1DQUFtQ0MsUUFBUUMsSUFBSSxDQUFDO1lBQ3hFO1FBQ0Y7SUFDRixFQUNBOzs7O0dBSUM7SUFHRHhNLE9BQU9FLElBQUksR0FBRyxTQUFTQSxLQUFLdU0sS0FBSztRQUMvQixJQUFJLENBQUMvRixVQUFVLENBQUN4RyxJQUFJLENBQUN1TTtJQUN2QixFQUNBOzs7O0dBSUM7SUFHRHpNLE9BQU8wTSxHQUFHLEdBQUcsU0FBU0E7UUFDcEIsMkJBQTJCO1FBQzNCLElBQUksQ0FBQ2hHLFVBQVUsQ0FBQ3hHLElBQUksQ0FBQztRQUNyQixJQUFJLENBQUNJLE9BQU8sQ0FBQztJQUNmLEVBQ0E7Ozs7Ozs7O0dBUUM7SUFHRE4sT0FBTzRFLFNBQVMsR0FBRyxTQUFTQSxVQUFVK0gsT0FBTztRQUMzQyxJQUFJLENBQUNoRyxXQUFXLENBQUMvQixTQUFTLENBQUMrSDtJQUM3QixFQUNBOzs7Ozs7R0FNQztJQUdEM00sT0FBT21GLFlBQVksR0FBRyxTQUFTQSxhQUFhd0gsT0FBTztRQUNqRCxJQUFJLENBQUNoRyxXQUFXLENBQUN4QixZQUFZLENBQUN3SDtJQUNoQztJQUVBLE9BQU9sRztBQUNULEVBQUVsSCx1RUFBTUE7QUFFbUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9icmVlemUtbmV4dC8uLi9ub2RlX21vZHVsZXMvbTN1OC1wYXJzZXIvZGlzdC9tM3U4LXBhcnNlci5lcy5qcz83OTE2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qISBAbmFtZSBtM3U4LXBhcnNlciBAdmVyc2lvbiA0LjguMCBAbGljZW5zZSBBcGFjaGUtMi4wICovXG5pbXBvcnQgX2luaGVyaXRzTG9vc2UgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbmhlcml0c0xvb3NlJztcbmltcG9ydCBTdHJlYW0gZnJvbSAnQHZpZGVvanMvdmhzLXV0aWxzL2VzL3N0cmVhbS5qcyc7XG5pbXBvcnQgX2V4dGVuZHMgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzJztcbmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkJztcbmltcG9ydCBkZWNvZGVCNjRUb1VpbnQ4QXJyYXkgZnJvbSAnQHZpZGVvanMvdmhzLXV0aWxzL2VzL2RlY29kZS1iNjQtdG8tdWludDgtYXJyYXkuanMnO1xuXG4vKipcbiAqIEEgc3RyZWFtIHRoYXQgYnVmZmVycyBzdHJpbmcgaW5wdXQgYW5kIGdlbmVyYXRlcyBhIGBkYXRhYCBldmVudCBmb3IgZWFjaFxuICogbGluZS5cbiAqXG4gKiBAY2xhc3MgTGluZVN0cmVhbVxuICogQGV4dGVuZHMgU3RyZWFtXG4gKi9cblxudmFyIExpbmVTdHJlYW0gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9TdHJlYW0pIHtcbiAgX2luaGVyaXRzTG9vc2UoTGluZVN0cmVhbSwgX1N0cmVhbSk7XG5cbiAgZnVuY3Rpb24gTGluZVN0cmVhbSgpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9TdHJlYW0uY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIF90aGlzLmJ1ZmZlciA9ICcnO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKipcbiAgICogQWRkIG5ldyBkYXRhIHRvIGJlIHBhcnNlZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGEgdGhlIHRleHQgdG8gcHJvY2Vzc1xuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBMaW5lU3RyZWFtLnByb3RvdHlwZTtcblxuICBfcHJvdG8ucHVzaCA9IGZ1bmN0aW9uIHB1c2goZGF0YSkge1xuICAgIHZhciBuZXh0TmV3bGluZTtcbiAgICB0aGlzLmJ1ZmZlciArPSBkYXRhO1xuICAgIG5leHROZXdsaW5lID0gdGhpcy5idWZmZXIuaW5kZXhPZignXFxuJyk7XG5cbiAgICBmb3IgKDsgbmV4dE5ld2xpbmUgPiAtMTsgbmV4dE5ld2xpbmUgPSB0aGlzLmJ1ZmZlci5pbmRleE9mKCdcXG4nKSkge1xuICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhJywgdGhpcy5idWZmZXIuc3Vic3RyaW5nKDAsIG5leHROZXdsaW5lKSk7XG4gICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnN1YnN0cmluZyhuZXh0TmV3bGluZSArIDEpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gTGluZVN0cmVhbTtcbn0oU3RyZWFtKTtcblxudmFyIFRBQiA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHgwOSk7XG5cbnZhciBwYXJzZUJ5dGVyYW5nZSA9IGZ1bmN0aW9uIHBhcnNlQnl0ZXJhbmdlKGJ5dGVyYW5nZVN0cmluZykge1xuICAvLyBvcHRpb25hbGx5IG1hdGNoIGFuZCBjYXB0dXJlIDArIGRpZ2l0cyBiZWZvcmUgYEBgXG4gIC8vIG9wdGlvbmFsbHkgbWF0Y2ggYW5kIGNhcHR1cmUgMCsgZGlnaXRzIGFmdGVyIGBAYFxuICB2YXIgbWF0Y2ggPSAvKFswLTkuXSopP0A/KFswLTkuXSopPy8uZXhlYyhieXRlcmFuZ2VTdHJpbmcgfHwgJycpO1xuICB2YXIgcmVzdWx0ID0ge307XG5cbiAgaWYgKG1hdGNoWzFdKSB7XG4gICAgcmVzdWx0Lmxlbmd0aCA9IHBhcnNlSW50KG1hdGNoWzFdLCAxMCk7XG4gIH1cblxuICBpZiAobWF0Y2hbMl0pIHtcbiAgICByZXN1bHQub2Zmc2V0ID0gcGFyc2VJbnQobWF0Y2hbMl0sIDEwKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuLyoqXG4gKiBcImZvcmdpdmluZ1wiIGF0dHJpYnV0ZSBsaXN0IHBzdWVkby1ncmFtbWFyOlxuICogYXR0cmlidXRlcyAtPiBrZXl2YWx1ZSAoJywnIGtleXZhbHVlKSpcbiAqIGtleXZhbHVlICAgLT4ga2V5ICc9JyB2YWx1ZVxuICoga2V5ICAgICAgICAtPiBbXj1dKlxuICogdmFsdWUgICAgICAtPiAnXCInIFteXCJdKiAnXCInIHwgW14sXSpcbiAqL1xuXG5cbnZhciBhdHRyaWJ1dGVTZXBhcmF0b3IgPSBmdW5jdGlvbiBhdHRyaWJ1dGVTZXBhcmF0b3IoKSB7XG4gIHZhciBrZXkgPSAnW149XSonO1xuICB2YXIgdmFsdWUgPSAnXCJbXlwiXSpcInxbXixdKic7XG4gIHZhciBrZXl2YWx1ZSA9ICcoPzonICsga2V5ICsgJyk9KD86JyArIHZhbHVlICsgJyknO1xuICByZXR1cm4gbmV3IFJlZ0V4cCgnKD86XnwsKSgnICsga2V5dmFsdWUgKyAnKScpO1xufTtcbi8qKlxuICogUGFyc2UgYXR0cmlidXRlcyBmcm9tIGEgbGluZSBnaXZlbiB0aGUgc2VwYXJhdG9yXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZXMgdGhlIGF0dHJpYnV0ZSBsaW5lIHRvIHBhcnNlXG4gKi9cblxuXG52YXIgcGFyc2VBdHRyaWJ1dGVzID0gZnVuY3Rpb24gcGFyc2VBdHRyaWJ1dGVzKGF0dHJpYnV0ZXMpIHtcbiAgLy8gc3BsaXQgdGhlIHN0cmluZyB1c2luZyBhdHRyaWJ1dGVzIGFzIHRoZSBzZXBhcmF0b3JcbiAgdmFyIGF0dHJzID0gYXR0cmlidXRlcy5zcGxpdChhdHRyaWJ1dGVTZXBhcmF0b3IoKSk7XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgdmFyIGkgPSBhdHRycy5sZW5ndGg7XG4gIHZhciBhdHRyO1xuXG4gIHdoaWxlIChpLS0pIHtcbiAgICAvLyBmaWx0ZXIgb3V0IHVubWF0Y2hlZCBwb3J0aW9ucyBvZiB0aGUgc3RyaW5nXG4gICAgaWYgKGF0dHJzW2ldID09PSAnJykge1xuICAgICAgY29udGludWU7XG4gICAgfSAvLyBzcGxpdCB0aGUga2V5IGFuZCB2YWx1ZVxuXG5cbiAgICBhdHRyID0gLyhbXj1dKik9KC4qKS8uZXhlYyhhdHRyc1tpXSkuc2xpY2UoMSk7IC8vIHRyaW0gd2hpdGVzcGFjZSBhbmQgcmVtb3ZlIG9wdGlvbmFsIHF1b3RlcyBhcm91bmQgdGhlIHZhbHVlXG5cbiAgICBhdHRyWzBdID0gYXR0clswXS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG4gICAgYXR0clsxXSA9IGF0dHJbMV0ucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xuICAgIGF0dHJbMV0gPSBhdHRyWzFdLnJlcGxhY2UoL15bJ1wiXSguKilbJ1wiXSQvZywgJyQxJyk7XG4gICAgcmVzdWx0W2F0dHJbMF1dID0gYXR0clsxXTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuLyoqXG4gKiBBIGxpbmUtbGV2ZWwgTTNVOCBwYXJzZXIgZXZlbnQgc3RyZWFtLiBJdCBleHBlY3RzIHRvIHJlY2VpdmUgaW5wdXQgb25lXG4gKiBsaW5lIGF0IGEgdGltZSBhbmQgcGVyZm9ybXMgYSBjb250ZXh0LWZyZWUgcGFyc2Ugb2YgaXRzIGNvbnRlbnRzLiBBIHN0cmVhbVxuICogaW50ZXJwcmV0YXRpb24gb2YgYSBtYW5pZmVzdCBjYW4gYmUgdXNlZnVsIGlmIHRoZSBtYW5pZmVzdCBpcyBleHBlY3RlZCB0b1xuICogYmUgdG9vIGxhcmdlIHRvIGZpdCBjb21mb3J0YWJseSBpbnRvIG1lbW9yeSBvciB0aGUgZW50aXJldHkgb2YgdGhlIGlucHV0XG4gKiBpcyBub3QgaW1tZWRpYXRlbHkgYXZhaWxhYmxlLiBPdGhlcndpc2UsIGl0J3MgcHJvYmFibHkgbXVjaCBlYXNpZXIgdG8gd29ya1xuICogd2l0aCBhIHJlZ3VsYXIgYFBhcnNlcmAgb2JqZWN0LlxuICpcbiAqIFByb2R1Y2VzIGBkYXRhYCBldmVudHMgd2l0aCBhbiBvYmplY3QgdGhhdCBjYXB0dXJlcyB0aGUgcGFyc2VyJ3NcbiAqIGludGVycHJldGF0aW9uIG9mIHRoZSBpbnB1dC4gVGhhdCBvYmplY3QgaGFzIGEgcHJvcGVydHkgYHRhZ2AgdGhhdCBpcyBvbmVcbiAqIG9mIGB1cmlgLCBgY29tbWVudGAsIG9yIGB0YWdgLiBVUklzIG9ubHkgaGF2ZSBhIHNpbmdsZSBhZGRpdGlvbmFsXG4gKiBwcm9wZXJ0eSwgYGxpbmVgLCB3aGljaCBjYXB0dXJlcyB0aGUgZW50aXJldHkgb2YgdGhlIGlucHV0IHdpdGhvdXRcbiAqIGludGVycHJldGF0aW9uLiBDb21tZW50cyBzaW1pbGFybHkgaGF2ZSBhIHNpbmdsZSBhZGRpdGlvbmFsIHByb3BlcnR5XG4gKiBgdGV4dGAgd2hpY2ggaXMgdGhlIGlucHV0IHdpdGhvdXQgdGhlIGxlYWRpbmcgYCNgLlxuICpcbiAqIFRhZ3MgYWx3YXlzIGhhdmUgYSBwcm9wZXJ0eSBgdGFnVHlwZWAgd2hpY2ggaXMgdGhlIGxvd2VyLWNhc2VkIHZlcnNpb24gb2ZcbiAqIHRoZSBNM1U4IGRpcmVjdGl2ZSB3aXRob3V0IHRoZSBgI0VYVGAgb3IgYCNFWFQtWC1gIHByZWZpeC4gRm9yIGluc3RhbmNlLFxuICogYCNFWFQtWC1NRURJQS1TRVFVRU5DRWAgYmVjb21lcyBgbWVkaWEtc2VxdWVuY2VgIHdoZW4gcGFyc2VkLiBVbnJlY29nbml6ZWRcbiAqIHRhZ3MgYXJlIGdpdmVuIHRoZSB0YWcgdHlwZSBgdW5rbm93bmAgYW5kIGEgc2luZ2xlIGFkZGl0aW9uYWwgcHJvcGVydHlcbiAqIGBkYXRhYCB3aXRoIHRoZSByZW1haW5kZXIgb2YgdGhlIGlucHV0LlxuICpcbiAqIEBjbGFzcyBQYXJzZVN0cmVhbVxuICogQGV4dGVuZHMgU3RyZWFtXG4gKi9cblxuXG52YXIgUGFyc2VTdHJlYW0gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9TdHJlYW0pIHtcbiAgX2luaGVyaXRzTG9vc2UoUGFyc2VTdHJlYW0sIF9TdHJlYW0pO1xuXG4gIGZ1bmN0aW9uIFBhcnNlU3RyZWFtKCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX1N0cmVhbS5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgX3RoaXMuY3VzdG9tUGFyc2VycyA9IFtdO1xuICAgIF90aGlzLnRhZ01hcHBlcnMgPSBbXTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFBhcnNlcyBhbiBhZGRpdGlvbmFsIGxpbmUgb2YgaW5wdXQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsaW5lIGEgc2luZ2xlIGxpbmUgb2YgYW4gTTNVOCBmaWxlIHRvIHBhcnNlXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IFBhcnNlU3RyZWFtLnByb3RvdHlwZTtcblxuICBfcHJvdG8ucHVzaCA9IGZ1bmN0aW9uIHB1c2gobGluZSkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIG1hdGNoO1xuICAgIHZhciBldmVudDsgLy8gc3RyaXAgd2hpdGVzcGFjZVxuXG4gICAgbGluZSA9IGxpbmUudHJpbSgpO1xuXG4gICAgaWYgKGxpbmUubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBpZ25vcmUgZW1wdHkgbGluZXNcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIFVSSXNcblxuXG4gICAgaWYgKGxpbmVbMF0gIT09ICcjJykge1xuICAgICAgdGhpcy50cmlnZ2VyKCdkYXRhJywge1xuICAgICAgICB0eXBlOiAndXJpJyxcbiAgICAgICAgdXJpOiBsaW5lXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIG1hcCB0YWdzXG5cblxuICAgIHZhciBuZXdMaW5lcyA9IHRoaXMudGFnTWFwcGVycy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbWFwcGVyKSB7XG4gICAgICB2YXIgbWFwcGVkTGluZSA9IG1hcHBlcihsaW5lKTsgLy8gc2tpcCBpZiB1bmNoYW5nZWRcblxuICAgICAgaWYgKG1hcHBlZExpbmUgPT09IGxpbmUpIHtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFjYy5jb25jYXQoW21hcHBlZExpbmVdKTtcbiAgICB9LCBbbGluZV0pO1xuICAgIG5ld0xpbmVzLmZvckVhY2goZnVuY3Rpb24gKG5ld0xpbmUpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMyLmN1c3RvbVBhcnNlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKF90aGlzMi5jdXN0b21QYXJzZXJzW2ldLmNhbGwoX3RoaXMyLCBuZXdMaW5lKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfSAvLyBDb21tZW50c1xuXG5cbiAgICAgIGlmIChuZXdMaW5lLmluZGV4T2YoJyNFWFQnKSAhPT0gMCkge1xuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIHtcbiAgICAgICAgICB0eXBlOiAnY29tbWVudCcsXG4gICAgICAgICAgdGV4dDogbmV3TGluZS5zbGljZSgxKVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIHN0cmlwIG9mZiBhbnkgY2FycmlhZ2UgcmV0dXJucyBoZXJlIHNvIHRoZSByZWdleCBtYXRjaGluZ1xuICAgICAgLy8gZG9lc24ndCBoYXZlIHRvIGFjY291bnQgZm9yIHRoZW0uXG5cblxuICAgICAgbmV3TGluZSA9IG5ld0xpbmUucmVwbGFjZSgnXFxyJywgJycpOyAvLyBUYWdzXG5cbiAgICAgIG1hdGNoID0gL14jRVhUTTNVLy5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ20zdSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVElORjo/KFswLTlcXC5dKik/LD8oLiopPyQvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnaW5mJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgIGV2ZW50LmR1cmF0aW9uID0gcGFyc2VGbG9hdChtYXRjaFsxXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWF0Y2hbMl0pIHtcbiAgICAgICAgICBldmVudC50aXRsZSA9IG1hdGNoWzJdO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLVRBUkdFVERVUkFUSU9OOj8oWzAtOS5dKik/Ly5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ3RhcmdldGR1cmF0aW9uJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgIGV2ZW50LmR1cmF0aW9uID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzMi50cmlnZ2VyKCdkYXRhJywgZXZlbnQpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbWF0Y2ggPSAvXiNFWFQtWC1WRVJTSU9OOj8oWzAtOS5dKik/Ly5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ3ZlcnNpb24nXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG1hdGNoWzFdKSB7XG4gICAgICAgICAgZXZlbnQudmVyc2lvbiA9IHBhcnNlSW50KG1hdGNoWzFdLCAxMCk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtTUVESUEtU0VRVUVOQ0U6PyhcXC0/WzAtOS5dKik/Ly5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ21lZGlhLXNlcXVlbmNlJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgIGV2ZW50Lm51bWJlciA9IHBhcnNlSW50KG1hdGNoWzFdLCAxMCk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtRElTQ09OVElOVUlUWS1TRVFVRU5DRTo/KFxcLT9bMC05Ll0qKT8vLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnZGlzY29udGludWl0eS1zZXF1ZW5jZSdcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICBldmVudC5udW1iZXIgPSBwYXJzZUludChtYXRjaFsxXSwgMTApO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLVBMQVlMSVNULVRZUEU6PyguKik/JC8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdwbGF5bGlzdC10eXBlJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgIGV2ZW50LnBsYXlsaXN0VHlwZSA9IG1hdGNoWzFdO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLUJZVEVSQU5HRTo/KC4qKT8kLy5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZXZlbnQgPSBfZXh0ZW5kcyhwYXJzZUJ5dGVyYW5nZShtYXRjaFsxXSksIHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnYnl0ZXJhbmdlJ1xuICAgICAgICB9KTtcblxuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtQUxMT1ctQ0FDSEU6PyhZRVN8Tk8pPy8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdhbGxvdy1jYWNoZSdcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICBldmVudC5hbGxvd2VkID0gIS9OTy8udGVzdChtYXRjaFsxXSk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtTUFQOj8oLiopJC8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdtYXAnXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG1hdGNoWzFdKSB7XG4gICAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBwYXJzZUF0dHJpYnV0ZXMobWF0Y2hbMV0pO1xuXG4gICAgICAgICAgaWYgKGF0dHJpYnV0ZXMuVVJJKSB7XG4gICAgICAgICAgICBldmVudC51cmkgPSBhdHRyaWJ1dGVzLlVSSTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYXR0cmlidXRlcy5CWVRFUkFOR0UpIHtcbiAgICAgICAgICAgIGV2ZW50LmJ5dGVyYW5nZSA9IHBhcnNlQnl0ZXJhbmdlKGF0dHJpYnV0ZXMuQllURVJBTkdFKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtU1RSRUFNLUlORjo/KC4qKSQvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnc3RyZWFtLWluZidcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzID0gcGFyc2VBdHRyaWJ1dGVzKG1hdGNoWzFdKTtcblxuICAgICAgICAgIGlmIChldmVudC5hdHRyaWJ1dGVzLlJFU09MVVRJT04pIHtcbiAgICAgICAgICAgIHZhciBzcGxpdCA9IGV2ZW50LmF0dHJpYnV0ZXMuUkVTT0xVVElPTi5zcGxpdCgneCcpO1xuICAgICAgICAgICAgdmFyIHJlc29sdXRpb24gPSB7fTtcblxuICAgICAgICAgICAgaWYgKHNwbGl0WzBdKSB7XG4gICAgICAgICAgICAgIHJlc29sdXRpb24ud2lkdGggPSBwYXJzZUludChzcGxpdFswXSwgMTApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3BsaXRbMV0pIHtcbiAgICAgICAgICAgICAgcmVzb2x1dGlvbi5oZWlnaHQgPSBwYXJzZUludChzcGxpdFsxXSwgMTApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzLlJFU09MVVRJT04gPSByZXNvbHV0aW9uO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChldmVudC5hdHRyaWJ1dGVzLkJBTkRXSURUSCkge1xuICAgICAgICAgICAgZXZlbnQuYXR0cmlidXRlcy5CQU5EV0lEVEggPSBwYXJzZUludChldmVudC5hdHRyaWJ1dGVzLkJBTkRXSURUSCwgMTApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChldmVudC5hdHRyaWJ1dGVzWydGUkFNRS1SQVRFJ10pIHtcbiAgICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXNbJ0ZSQU1FLVJBVEUnXSA9IHBhcnNlRmxvYXQoZXZlbnQuYXR0cmlidXRlc1snRlJBTUUtUkFURSddKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZXZlbnQuYXR0cmlidXRlc1snUFJPR1JBTS1JRCddKSB7XG4gICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzWydQUk9HUkFNLUlEJ10gPSBwYXJzZUludChldmVudC5hdHRyaWJ1dGVzWydQUk9HUkFNLUlEJ10sIDEwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtTUVESUE6PyguKikkLy5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ21lZGlhJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMgPSBwYXJzZUF0dHJpYnV0ZXMobWF0Y2hbMV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLUVORExJU1QvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnZW5kbGlzdCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLURJU0NPTlRJTlVJVFkvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnZGlzY29udGludWl0eSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLVBST0dSQU0tREFURS1USU1FOj8oLiopJC8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdwcm9ncmFtLWRhdGUtdGltZSdcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICBldmVudC5kYXRlVGltZVN0cmluZyA9IG1hdGNoWzFdO1xuICAgICAgICAgIGV2ZW50LmRhdGVUaW1lT2JqZWN0ID0gbmV3IERhdGUobWF0Y2hbMV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLUtFWTo/KC4qKSQvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAna2V5J1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMgPSBwYXJzZUF0dHJpYnV0ZXMobWF0Y2hbMV0pOyAvLyBwYXJzZSB0aGUgSVYgc3RyaW5nIGludG8gYSBVaW50MzJBcnJheVxuXG4gICAgICAgICAgaWYgKGV2ZW50LmF0dHJpYnV0ZXMuSVYpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5hdHRyaWJ1dGVzLklWLnN1YnN0cmluZygwLCAyKS50b0xvd2VyQ2FzZSgpID09PSAnMHgnKSB7XG4gICAgICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMuSVYgPSBldmVudC5hdHRyaWJ1dGVzLklWLnN1YnN0cmluZygyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZXZlbnQuYXR0cmlidXRlcy5JViA9IGV2ZW50LmF0dHJpYnV0ZXMuSVYubWF0Y2goLy57OH0vZyk7XG4gICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzLklWWzBdID0gcGFyc2VJbnQoZXZlbnQuYXR0cmlidXRlcy5JVlswXSwgMTYpO1xuICAgICAgICAgICAgZXZlbnQuYXR0cmlidXRlcy5JVlsxXSA9IHBhcnNlSW50KGV2ZW50LmF0dHJpYnV0ZXMuSVZbMV0sIDE2KTtcbiAgICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMuSVZbMl0gPSBwYXJzZUludChldmVudC5hdHRyaWJ1dGVzLklWWzJdLCAxNik7XG4gICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzLklWWzNdID0gcGFyc2VJbnQoZXZlbnQuYXR0cmlidXRlcy5JVlszXSwgMTYpO1xuICAgICAgICAgICAgZXZlbnQuYXR0cmlidXRlcy5JViA9IG5ldyBVaW50MzJBcnJheShldmVudC5hdHRyaWJ1dGVzLklWKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtU1RBUlQ6PyguKikkLy5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ3N0YXJ0J1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMgPSBwYXJzZUF0dHJpYnV0ZXMobWF0Y2hbMV0pO1xuICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXNbJ1RJTUUtT0ZGU0VUJ10gPSBwYXJzZUZsb2F0KGV2ZW50LmF0dHJpYnV0ZXNbJ1RJTUUtT0ZGU0VUJ10pO1xuICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMuUFJFQ0lTRSA9IC9ZRVMvLnRlc3QoZXZlbnQuYXR0cmlidXRlcy5QUkVDSVNFKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzMi50cmlnZ2VyKCdkYXRhJywgZXZlbnQpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbWF0Y2ggPSAvXiNFWFQtWC1DVUUtT1VULUNPTlQ6PyguKik/JC8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdjdWUtb3V0LWNvbnQnXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG1hdGNoWzFdKSB7XG4gICAgICAgICAgZXZlbnQuZGF0YSA9IG1hdGNoWzFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGV2ZW50LmRhdGEgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzMi50cmlnZ2VyKCdkYXRhJywgZXZlbnQpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbWF0Y2ggPSAvXiNFWFQtWC1DVUUtT1VUOj8oLiopPyQvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnY3VlLW91dCdcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICBldmVudC5kYXRhID0gbWF0Y2hbMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXZlbnQuZGF0YSA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLUNVRS1JTjo/KC4qKT8kLy5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ2N1ZS1pbidcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICBldmVudC5kYXRhID0gbWF0Y2hbMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXZlbnQuZGF0YSA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLVNLSVA6KC4qKSQvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnc2tpcCdcbiAgICAgICAgfTtcbiAgICAgICAgZXZlbnQuYXR0cmlidXRlcyA9IHBhcnNlQXR0cmlidXRlcyhtYXRjaFsxXSk7XG5cbiAgICAgICAgaWYgKGV2ZW50LmF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoJ1NLSVBQRUQtU0VHTUVOVFMnKSkge1xuICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXNbJ1NLSVBQRUQtU0VHTUVOVFMnXSA9IHBhcnNlSW50KGV2ZW50LmF0dHJpYnV0ZXNbJ1NLSVBQRUQtU0VHTUVOVFMnXSwgMTApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoJ1JFQ0VOVExZLVJFTU9WRUQtREFURVJBTkdFUycpKSB7XG4gICAgICAgICAgZXZlbnQuYXR0cmlidXRlc1snUkVDRU5UTFktUkVNT1ZFRC1EQVRFUkFOR0VTJ10gPSBldmVudC5hdHRyaWJ1dGVzWydSRUNFTlRMWS1SRU1PVkVELURBVEVSQU5HRVMnXS5zcGxpdChUQUIpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLVBBUlQ6KC4qKSQvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAncGFydCdcbiAgICAgICAgfTtcbiAgICAgICAgZXZlbnQuYXR0cmlidXRlcyA9IHBhcnNlQXR0cmlidXRlcyhtYXRjaFsxXSk7XG4gICAgICAgIFsnRFVSQVRJT04nXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICBpZiAoZXZlbnQuYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzW2tleV0gPSBwYXJzZUZsb2F0KGV2ZW50LmF0dHJpYnV0ZXNba2V5XSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgWydJTkRFUEVOREVOVCcsICdHQVAnXS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICBpZiAoZXZlbnQuYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzW2tleV0gPSAvWUVTLy50ZXN0KGV2ZW50LmF0dHJpYnV0ZXNba2V5XSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZXZlbnQuYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eSgnQllURVJBTkdFJykpIHtcbiAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzLmJ5dGVyYW5nZSA9IHBhcnNlQnl0ZXJhbmdlKGV2ZW50LmF0dHJpYnV0ZXMuQllURVJBTkdFKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzMi50cmlnZ2VyKCdkYXRhJywgZXZlbnQpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbWF0Y2ggPSAvXiNFWFQtWC1TRVJWRVItQ09OVFJPTDooLiopJC8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdzZXJ2ZXItY29udHJvbCdcbiAgICAgICAgfTtcbiAgICAgICAgZXZlbnQuYXR0cmlidXRlcyA9IHBhcnNlQXR0cmlidXRlcyhtYXRjaFsxXSk7XG4gICAgICAgIFsnQ0FOLVNLSVAtVU5USUwnLCAnUEFSVC1IT0xELUJBQ0snLCAnSE9MRC1CQUNLJ10uZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgaWYgKGV2ZW50LmF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgZXZlbnQuYXR0cmlidXRlc1trZXldID0gcGFyc2VGbG9hdChldmVudC5hdHRyaWJ1dGVzW2tleV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFsnQ0FOLVNLSVAtREFURVJBTkdFUycsICdDQU4tQkxPQ0stUkVMT0FEJ10uZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgaWYgKGV2ZW50LmF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgZXZlbnQuYXR0cmlidXRlc1trZXldID0gL1lFUy8udGVzdChldmVudC5hdHRyaWJ1dGVzW2tleV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLVBBUlQtSU5GOiguKikkLy5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ3BhcnQtaW5mJ1xuICAgICAgICB9O1xuICAgICAgICBldmVudC5hdHRyaWJ1dGVzID0gcGFyc2VBdHRyaWJ1dGVzKG1hdGNoWzFdKTtcbiAgICAgICAgWydQQVJULVRBUkdFVCddLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgIGlmIChldmVudC5hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXNba2V5XSA9IHBhcnNlRmxvYXQoZXZlbnQuYXR0cmlidXRlc1trZXldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIF90aGlzMi50cmlnZ2VyKCdkYXRhJywgZXZlbnQpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbWF0Y2ggPSAvXiNFWFQtWC1QUkVMT0FELUhJTlQ6KC4qKSQvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAncHJlbG9hZC1oaW50J1xuICAgICAgICB9O1xuICAgICAgICBldmVudC5hdHRyaWJ1dGVzID0gcGFyc2VBdHRyaWJ1dGVzKG1hdGNoWzFdKTtcbiAgICAgICAgWydCWVRFUkFOR0UtU1RBUlQnLCAnQllURVJBTkdFLUxFTkdUSCddLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgIGlmIChldmVudC5hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXNba2V5XSA9IHBhcnNlSW50KGV2ZW50LmF0dHJpYnV0ZXNba2V5XSwgMTApO1xuICAgICAgICAgICAgdmFyIHN1YmtleSA9IGtleSA9PT0gJ0JZVEVSQU5HRS1MRU5HVEgnID8gJ2xlbmd0aCcgOiAnb2Zmc2V0JztcbiAgICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMuYnl0ZXJhbmdlID0gZXZlbnQuYXR0cmlidXRlcy5ieXRlcmFuZ2UgfHwge307XG4gICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzLmJ5dGVyYW5nZVtzdWJrZXldID0gZXZlbnQuYXR0cmlidXRlc1trZXldOyAvLyBvbmx5IGtlZXAgdGhlIHBhcnNlZCBieXRlcmFuZ2Ugb2JqZWN0LlxuXG4gICAgICAgICAgICBkZWxldGUgZXZlbnQuYXR0cmlidXRlc1trZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLVJFTkRJVElPTi1SRVBPUlQ6KC4qKSQvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAncmVuZGl0aW9uLXJlcG9ydCdcbiAgICAgICAgfTtcbiAgICAgICAgZXZlbnQuYXR0cmlidXRlcyA9IHBhcnNlQXR0cmlidXRlcyhtYXRjaFsxXSk7XG4gICAgICAgIFsnTEFTVC1NU04nLCAnTEFTVC1QQVJUJ10uZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgaWYgKGV2ZW50LmF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgZXZlbnQuYXR0cmlidXRlc1trZXldID0gcGFyc2VJbnQoZXZlbnQuYXR0cmlidXRlc1trZXldLCAxMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIHVua25vd24gdGFnIHR5cGVcblxuXG4gICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIHtcbiAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgIGRhdGE6IG5ld0xpbmUuc2xpY2UoNClcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgYSBwYXJzZXIgZm9yIGN1c3RvbSBoZWFkZXJzXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgIG9wdGlvbnMgICAgICAgICAgICAgIGEgbWFwIG9mIG9wdGlvbnMgZm9yIHRoZSBhZGRlZCBwYXJzZXJcbiAgICogQHBhcmFtIHtSZWdFeHB9ICAgb3B0aW9ucy5leHByZXNzaW9uICAgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggdGhlIGN1c3RvbSBoZWFkZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9ICAgb3B0aW9ucy5jdXN0b21UeXBlICAgdGhlIGN1c3RvbSB0eXBlIHRvIHJlZ2lzdGVyIHRvIHRoZSBvdXRwdXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbnMuZGF0YVBhcnNlcl0gZnVuY3Rpb24gdG8gcGFyc2UgdGhlIGxpbmUgaW50byBhbiBvYmplY3RcbiAgICogQHBhcmFtIHtib29sZWFufSAgW29wdGlvbnMuc2VnbWVudF0gICAgc2hvdWxkIHRhZyBkYXRhIGJlIGF0dGFjaGVkIHRvIHRoZSBzZWdtZW50IG9iamVjdFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5hZGRQYXJzZXIgPSBmdW5jdGlvbiBhZGRQYXJzZXIoX3JlZikge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgdmFyIGV4cHJlc3Npb24gPSBfcmVmLmV4cHJlc3Npb24sXG4gICAgICAgIGN1c3RvbVR5cGUgPSBfcmVmLmN1c3RvbVR5cGUsXG4gICAgICAgIGRhdGFQYXJzZXIgPSBfcmVmLmRhdGFQYXJzZXIsXG4gICAgICAgIHNlZ21lbnQgPSBfcmVmLnNlZ21lbnQ7XG5cbiAgICBpZiAodHlwZW9mIGRhdGFQYXJzZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGRhdGFQYXJzZXIgPSBmdW5jdGlvbiBkYXRhUGFyc2VyKGxpbmUpIHtcbiAgICAgICAgcmV0dXJuIGxpbmU7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHRoaXMuY3VzdG9tUGFyc2Vycy5wdXNoKGZ1bmN0aW9uIChsaW5lKSB7XG4gICAgICB2YXIgbWF0Y2ggPSBleHByZXNzaW9uLmV4ZWMobGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBfdGhpczMudHJpZ2dlcignZGF0YScsIHtcbiAgICAgICAgICB0eXBlOiAnY3VzdG9tJyxcbiAgICAgICAgICBkYXRhOiBkYXRhUGFyc2VyKGxpbmUpLFxuICAgICAgICAgIGN1c3RvbVR5cGU6IGN1c3RvbVR5cGUsXG4gICAgICAgICAgc2VnbWVudDogc2VnbWVudFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQWRkIGEgY3VzdG9tIGhlYWRlciBtYXBwZXJcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9ICAgb3B0aW9uc1xuICAgKiBAcGFyYW0ge1JlZ0V4cH0gICBvcHRpb25zLmV4cHJlc3Npb24gICBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCB0aGUgY3VzdG9tIGhlYWRlclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcHRpb25zLm1hcCAgICAgICAgICBmdW5jdGlvbiB0byB0cmFuc2xhdGUgdGFnIGludG8gYSBkaWZmZXJlbnQgdGFnXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmFkZFRhZ01hcHBlciA9IGZ1bmN0aW9uIGFkZFRhZ01hcHBlcihfcmVmMikge1xuICAgIHZhciBleHByZXNzaW9uID0gX3JlZjIuZXhwcmVzc2lvbixcbiAgICAgICAgbWFwID0gX3JlZjIubWFwO1xuXG4gICAgdmFyIG1hcEZuID0gZnVuY3Rpb24gbWFwRm4obGluZSkge1xuICAgICAgaWYgKGV4cHJlc3Npb24udGVzdChsaW5lKSkge1xuICAgICAgICByZXR1cm4gbWFwKGxpbmUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbGluZTtcbiAgICB9O1xuXG4gICAgdGhpcy50YWdNYXBwZXJzLnB1c2gobWFwRm4pO1xuICB9O1xuXG4gIHJldHVybiBQYXJzZVN0cmVhbTtcbn0oU3RyZWFtKTtcblxudmFyIGNhbWVsQ2FzZSA9IGZ1bmN0aW9uIGNhbWVsQ2FzZShzdHIpIHtcbiAgcmV0dXJuIHN0ci50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLy0oXFx3KS9nLCBmdW5jdGlvbiAoYSkge1xuICAgIHJldHVybiBhWzFdLnRvVXBwZXJDYXNlKCk7XG4gIH0pO1xufTtcblxudmFyIGNhbWVsQ2FzZUtleXMgPSBmdW5jdGlvbiBjYW1lbENhc2VLZXlzKGF0dHJpYnV0ZXMpIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXN1bHRbY2FtZWxDYXNlKGtleSldID0gYXR0cmlidXRlc1trZXldO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07IC8vIHNldCBTRVJWRVItQ09OVFJPTCBob2xkIGJhY2sgYmFzZWQgdXBvbiB0YXJnZXREdXJhdGlvbiBhbmQgcGFydFRhcmdldER1cmF0aW9uXG4vLyB3ZSBuZWVkIHRoaXMgaGVscGVyIGJlY2F1c2UgZGVmYXVsdHMgYXJlIGJhc2VkIHVwb24gdGFyZ2V0RHVyYXRpb24gYW5kXG4vLyBwYXJ0VGFyZ2V0RHVyYXRpb24gYmVpbmcgc2V0LCBidXQgdGhleSBtYXkgbm90IGJlIGlmIFNFUlZFUi1DT05UUk9MIGFwcGVhcnMgYmVmb3JlXG4vLyB0YXJnZXQgZHVyYXRpb25zIGFyZSBzZXQuXG5cblxudmFyIHNldEhvbGRCYWNrID0gZnVuY3Rpb24gc2V0SG9sZEJhY2sobWFuaWZlc3QpIHtcbiAgdmFyIHNlcnZlckNvbnRyb2wgPSBtYW5pZmVzdC5zZXJ2ZXJDb250cm9sLFxuICAgICAgdGFyZ2V0RHVyYXRpb24gPSBtYW5pZmVzdC50YXJnZXREdXJhdGlvbixcbiAgICAgIHBhcnRUYXJnZXREdXJhdGlvbiA9IG1hbmlmZXN0LnBhcnRUYXJnZXREdXJhdGlvbjtcblxuICBpZiAoIXNlcnZlckNvbnRyb2wpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgdGFnID0gJyNFWFQtWC1TRVJWRVItQ09OVFJPTCc7XG4gIHZhciBoYiA9ICdob2xkQmFjayc7XG4gIHZhciBwaGIgPSAncGFydEhvbGRCYWNrJztcbiAgdmFyIG1pblRhcmdldER1cmF0aW9uID0gdGFyZ2V0RHVyYXRpb24gJiYgdGFyZ2V0RHVyYXRpb24gKiAzO1xuICB2YXIgbWluUGFydER1cmF0aW9uID0gcGFydFRhcmdldER1cmF0aW9uICYmIHBhcnRUYXJnZXREdXJhdGlvbiAqIDI7XG5cbiAgaWYgKHRhcmdldER1cmF0aW9uICYmICFzZXJ2ZXJDb250cm9sLmhhc093blByb3BlcnR5KGhiKSkge1xuICAgIHNlcnZlckNvbnRyb2xbaGJdID0gbWluVGFyZ2V0RHVyYXRpb247XG4gICAgdGhpcy50cmlnZ2VyKCdpbmZvJywge1xuICAgICAgbWVzc2FnZTogdGFnICsgXCIgZGVmYXVsdGluZyBIT0xELUJBQ0sgdG8gdGFyZ2V0RHVyYXRpb24gKiAzIChcIiArIG1pblRhcmdldER1cmF0aW9uICsgXCIpLlwiXG4gICAgfSk7XG4gIH1cblxuICBpZiAobWluVGFyZ2V0RHVyYXRpb24gJiYgc2VydmVyQ29udHJvbFtoYl0gPCBtaW5UYXJnZXREdXJhdGlvbikge1xuICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgIG1lc3NhZ2U6IHRhZyArIFwiIGNsYW1waW5nIEhPTEQtQkFDSyAoXCIgKyBzZXJ2ZXJDb250cm9sW2hiXSArIFwiKSB0byB0YXJnZXREdXJhdGlvbiAqIDMgKFwiICsgbWluVGFyZ2V0RHVyYXRpb24gKyBcIilcIlxuICAgIH0pO1xuICAgIHNlcnZlckNvbnRyb2xbaGJdID0gbWluVGFyZ2V0RHVyYXRpb247XG4gIH0gLy8gZGVmYXVsdCBubyBwYXJ0IGhvbGQgYmFjayB0byBwYXJ0IHRhcmdldCBkdXJhdGlvbiAqIDNcblxuXG4gIGlmIChwYXJ0VGFyZ2V0RHVyYXRpb24gJiYgIXNlcnZlckNvbnRyb2wuaGFzT3duUHJvcGVydHkocGhiKSkge1xuICAgIHNlcnZlckNvbnRyb2xbcGhiXSA9IHBhcnRUYXJnZXREdXJhdGlvbiAqIDM7XG4gICAgdGhpcy50cmlnZ2VyKCdpbmZvJywge1xuICAgICAgbWVzc2FnZTogdGFnICsgXCIgZGVmYXVsdGluZyBQQVJULUhPTEQtQkFDSyB0byBwYXJ0VGFyZ2V0RHVyYXRpb24gKiAzIChcIiArIHNlcnZlckNvbnRyb2xbcGhiXSArIFwiKS5cIlxuICAgIH0pO1xuICB9IC8vIGlmIHBhcnQgaG9sZCBiYWNrIGlzIHRvbyBzbWFsbCBkZWZhdWx0IGl0IHRvIHBhcnQgdGFyZ2V0IGR1cmF0aW9uICogMlxuXG5cbiAgaWYgKHBhcnRUYXJnZXREdXJhdGlvbiAmJiBzZXJ2ZXJDb250cm9sW3BoYl0gPCBtaW5QYXJ0RHVyYXRpb24pIHtcbiAgICB0aGlzLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICBtZXNzYWdlOiB0YWcgKyBcIiBjbGFtcGluZyBQQVJULUhPTEQtQkFDSyAoXCIgKyBzZXJ2ZXJDb250cm9sW3BoYl0gKyBcIikgdG8gcGFydFRhcmdldER1cmF0aW9uICogMiAoXCIgKyBtaW5QYXJ0RHVyYXRpb24gKyBcIikuXCJcbiAgICB9KTtcbiAgICBzZXJ2ZXJDb250cm9sW3BoYl0gPSBtaW5QYXJ0RHVyYXRpb247XG4gIH1cbn07XG4vKipcbiAqIEEgcGFyc2VyIGZvciBNM1U4IGZpbGVzLiBUaGUgY3VycmVudCBpbnRlcnByZXRhdGlvbiBvZiB0aGUgaW5wdXQgaXNcbiAqIGV4cG9zZWQgYXMgYSBwcm9wZXJ0eSBgbWFuaWZlc3RgIG9uIHBhcnNlciBvYmplY3RzLiBJdCdzIGp1c3QgdHdvIGxpbmVzIHRvXG4gKiBjcmVhdGUgYW5kIHBhcnNlIGEgbWFuaWZlc3Qgb25jZSB5b3UgaGF2ZSB0aGUgY29udGVudHMgYXZhaWxhYmxlIGFzIGEgc3RyaW5nOlxuICpcbiAqIGBgYGpzXG4gKiB2YXIgcGFyc2VyID0gbmV3IG0zdTguUGFyc2VyKCk7XG4gKiBwYXJzZXIucHVzaCh4aHIucmVzcG9uc2VUZXh0KTtcbiAqIGBgYFxuICpcbiAqIE5ldyBpbnB1dCBjYW4gbGF0ZXIgYmUgYXBwbGllZCB0byB1cGRhdGUgdGhlIG1hbmlmZXN0IG9iamVjdCBieSBjYWxsaW5nXG4gKiBgcHVzaGAgYWdhaW4uXG4gKlxuICogVGhlIHBhcnNlciBhdHRlbXB0cyB0byBjcmVhdGUgYSB1c2FibGUgbWFuaWZlc3Qgb2JqZWN0IGV2ZW4gaWYgdGhlXG4gKiB1bmRlcmx5aW5nIGlucHV0IGlzIHNvbWV3aGF0IG5vbnNlbnNpY2FsLiBJdCBlbWl0cyBgaW5mb2AgYW5kIGB3YXJuaW5nYFxuICogZXZlbnRzIGR1cmluZyB0aGUgcGFyc2UgaWYgaXQgZW5jb3VudGVycyBpbnB1dCB0aGF0IHNlZW1zIGludmFsaWQgb3JcbiAqIHJlcXVpcmVzIHNvbWUgcHJvcGVydHkgb2YgdGhlIG1hbmlmZXN0IG9iamVjdCB0byBiZSBkZWZhdWx0ZWQuXG4gKlxuICogQGNsYXNzIFBhcnNlclxuICogQGV4dGVuZHMgU3RyZWFtXG4gKi9cblxuXG52YXIgUGFyc2VyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfU3RyZWFtKSB7XG4gIF9pbmhlcml0c0xvb3NlKFBhcnNlciwgX1N0cmVhbSk7XG5cbiAgZnVuY3Rpb24gUGFyc2VyKCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX1N0cmVhbS5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgX3RoaXMubGluZVN0cmVhbSA9IG5ldyBMaW5lU3RyZWFtKCk7XG4gICAgX3RoaXMucGFyc2VTdHJlYW0gPSBuZXcgUGFyc2VTdHJlYW0oKTtcblxuICAgIF90aGlzLmxpbmVTdHJlYW0ucGlwZShfdGhpcy5wYXJzZVN0cmVhbSk7XG4gICAgLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC10aGlzICovXG5cblxuICAgIHZhciBzZWxmID0gX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyk7XG4gICAgLyogZXNsaW50LWVuYWJsZSBjb25zaXN0ZW50LXRoaXMgKi9cblxuXG4gICAgdmFyIHVyaXMgPSBbXTtcbiAgICB2YXIgY3VycmVudFVyaSA9IHt9OyAvLyBpZiBzcGVjaWZpZWQsIHRoZSBhY3RpdmUgRVhULVgtTUFQIGRlZmluaXRpb25cblxuICAgIHZhciBjdXJyZW50TWFwOyAvLyBpZiBzcGVjaWZpZWQsIHRoZSBhY3RpdmUgZGVjcnlwdGlvbiBrZXlcblxuICAgIHZhciBfa2V5O1xuXG4gICAgdmFyIGhhc1BhcnRzID0gZmFsc2U7XG5cbiAgICB2YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTtcblxuICAgIHZhciBkZWZhdWx0TWVkaWFHcm91cHMgPSB7XG4gICAgICAnQVVESU8nOiB7fSxcbiAgICAgICdWSURFTyc6IHt9LFxuICAgICAgJ0NMT1NFRC1DQVBUSU9OUyc6IHt9LFxuICAgICAgJ1NVQlRJVExFUyc6IHt9XG4gICAgfTsgLy8gVGhpcyBpcyB0aGUgV2lkZXZpbmUgVVVJRCBmcm9tIERBU0ggSUYgSU9QLiBUaGUgc2FtZSBleGFjdCBzdHJpbmcgaXNcbiAgICAvLyB1c2VkIGluIE1QRHMgd2l0aCBXaWRldmluZSBlbmNyeXB0ZWQgc3RyZWFtcy5cblxuICAgIHZhciB3aWRldmluZVV1aWQgPSAndXJuOnV1aWQ6ZWRlZjhiYTktNzlkNi00YWNlLWEzYzgtMjdkY2Q1MWQyMWVkJzsgLy8gZ3JvdXAgc2VnbWVudHMgaW50byBudW1iZXJlZCB0aW1lbGluZXMgZGVsaW5lYXRlZCBieSBkaXNjb250aW51aXRpZXNcblxuICAgIHZhciBjdXJyZW50VGltZWxpbmUgPSAwOyAvLyB0aGUgbWFuaWZlc3QgaXMgZW1wdHkgdW50aWwgdGhlIHBhcnNlIHN0cmVhbSBiZWdpbnMgZGVsaXZlcmluZyBkYXRhXG5cbiAgICBfdGhpcy5tYW5pZmVzdCA9IHtcbiAgICAgIGFsbG93Q2FjaGU6IHRydWUsXG4gICAgICBkaXNjb250aW51aXR5U3RhcnRzOiBbXSxcbiAgICAgIHNlZ21lbnRzOiBbXVxuICAgIH07IC8vIGtlZXAgdHJhY2sgb2YgdGhlIGxhc3Qgc2VlbiBzZWdtZW50J3MgYnl0ZSByYW5nZSBlbmQsIGFzIHNlZ21lbnRzIGFyZSBub3QgcmVxdWlyZWRcbiAgICAvLyB0byBwcm92aWRlIHRoZSBvZmZzZXQsIGluIHdoaWNoIGNhc2UgaXQgZGVmYXVsdHMgdG8gdGhlIG5leHQgYnl0ZSBhZnRlciB0aGVcbiAgICAvLyBwcmV2aW91cyBzZWdtZW50XG5cbiAgICB2YXIgbGFzdEJ5dGVyYW5nZUVuZCA9IDA7IC8vIGtlZXAgdHJhY2sgb2YgdGhlIGxhc3Qgc2VlbiBwYXJ0J3MgYnl0ZSByYW5nZSBlbmQuXG5cbiAgICB2YXIgbGFzdFBhcnRCeXRlcmFuZ2VFbmQgPSAwO1xuXG4gICAgX3RoaXMub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIG9ubHkgYWRkIHByZWxvYWRTZWdtZW50IGlmIHdlIGRvbid0IHlldCBoYXZlIGEgdXJpIGZvciBpdC5cbiAgICAgIC8vIGFuZCB3ZSBhY3R1YWxseSBoYXZlIHBhcnRzL3ByZWxvYWRIaW50c1xuICAgICAgaWYgKGN1cnJlbnRVcmkudXJpIHx8ICFjdXJyZW50VXJpLnBhcnRzICYmICFjdXJyZW50VXJpLnByZWxvYWRIaW50cykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghY3VycmVudFVyaS5tYXAgJiYgY3VycmVudE1hcCkge1xuICAgICAgICBjdXJyZW50VXJpLm1hcCA9IGN1cnJlbnRNYXA7XG4gICAgICB9XG5cbiAgICAgIGlmICghY3VycmVudFVyaS5rZXkgJiYgX2tleSkge1xuICAgICAgICBjdXJyZW50VXJpLmtleSA9IF9rZXk7XG4gICAgICB9XG5cbiAgICAgIGlmICghY3VycmVudFVyaS50aW1lbGluZSAmJiB0eXBlb2YgY3VycmVudFRpbWVsaW5lID09PSAnbnVtYmVyJykge1xuICAgICAgICBjdXJyZW50VXJpLnRpbWVsaW5lID0gY3VycmVudFRpbWVsaW5lO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5tYW5pZmVzdC5wcmVsb2FkU2VnbWVudCA9IGN1cnJlbnRVcmk7XG4gICAgfSk7IC8vIHVwZGF0ZSB0aGUgbWFuaWZlc3Qgd2l0aCB0aGUgbTN1OCBlbnRyeSBmcm9tIHRoZSBwYXJzZSBzdHJlYW1cblxuXG4gICAgX3RoaXMucGFyc2VTdHJlYW0ub24oJ2RhdGEnLCBmdW5jdGlvbiAoZW50cnkpIHtcbiAgICAgIHZhciBtZWRpYUdyb3VwO1xuICAgICAgdmFyIHJlbmRpdGlvbjtcbiAgICAgICh7XG4gICAgICAgIHRhZzogZnVuY3Rpb24gdGFnKCkge1xuICAgICAgICAgIC8vIHN3aXRjaCBiYXNlZCBvbiB0aGUgdGFnIHR5cGVcbiAgICAgICAgICAoKHtcbiAgICAgICAgICAgIHZlcnNpb246IGZ1bmN0aW9uIHZlcnNpb24oKSB7XG4gICAgICAgICAgICAgIGlmIChlbnRyeS52ZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC52ZXJzaW9uID0gZW50cnkudmVyc2lvbjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdhbGxvdy1jYWNoZSc6IGZ1bmN0aW9uIGFsbG93Q2FjaGUoKSB7XG4gICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QuYWxsb3dDYWNoZSA9IGVudHJ5LmFsbG93ZWQ7XG5cbiAgICAgICAgICAgICAgaWYgKCEoJ2FsbG93ZWQnIGluIGVudHJ5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignaW5mbycsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdkZWZhdWx0aW5nIGFsbG93Q2FjaGUgdG8gWUVTJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QuYWxsb3dDYWNoZSA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBieXRlcmFuZ2U6IGZ1bmN0aW9uIGJ5dGVyYW5nZSgpIHtcbiAgICAgICAgICAgICAgdmFyIGJ5dGVyYW5nZSA9IHt9O1xuXG4gICAgICAgICAgICAgIGlmICgnbGVuZ3RoJyBpbiBlbnRyeSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRVcmkuYnl0ZXJhbmdlID0gYnl0ZXJhbmdlO1xuICAgICAgICAgICAgICAgIGJ5dGVyYW5nZS5sZW5ndGggPSBlbnRyeS5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICBpZiAoISgnb2Zmc2V0JyBpbiBlbnRyeSkpIHtcbiAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgKiBGcm9tIHRoZSBsYXRlc3Qgc3BlYyAoYXMgb2YgdGhpcyB3cml0aW5nKTpcbiAgICAgICAgICAgICAgICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9kcmFmdC1wYW50b3MtaHR0cC1saXZlLXN0cmVhbWluZy0yMyNzZWN0aW9uLTQuMy4yLjJcbiAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgKiBTYW1lIHRleHQgc2luY2UgRVhULVgtQllURVJBTkdFJ3MgaW50cm9kdWN0aW9uIGluIGRyYWZ0IDc6XG4gICAgICAgICAgICAgICAgICAgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvZHJhZnQtcGFudG9zLWh0dHAtbGl2ZS1zdHJlYW1pbmctMDcjc2VjdGlvbi0zLjMuMSlcbiAgICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICAgKiBcIklmIG8gW29mZnNldF0gaXMgbm90IHByZXNlbnQsIHRoZSBzdWItcmFuZ2UgYmVnaW5zIGF0IHRoZSBuZXh0IGJ5dGVcbiAgICAgICAgICAgICAgICAgICAqIGZvbGxvd2luZyB0aGUgc3ViLXJhbmdlIG9mIHRoZSBwcmV2aW91cyBtZWRpYSBzZWdtZW50LlwiXG4gICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgIGVudHJ5Lm9mZnNldCA9IGxhc3RCeXRlcmFuZ2VFbmQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKCdvZmZzZXQnIGluIGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFVyaS5ieXRlcmFuZ2UgPSBieXRlcmFuZ2U7XG4gICAgICAgICAgICAgICAgYnl0ZXJhbmdlLm9mZnNldCA9IGVudHJ5Lm9mZnNldDtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGxhc3RCeXRlcmFuZ2VFbmQgPSBieXRlcmFuZ2Uub2Zmc2V0ICsgYnl0ZXJhbmdlLmxlbmd0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbmRsaXN0OiBmdW5jdGlvbiBlbmRsaXN0KCkge1xuICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LmVuZExpc3QgPSB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGluZjogZnVuY3Rpb24gaW5mKCkge1xuICAgICAgICAgICAgICBpZiAoISgnbWVkaWFTZXF1ZW5jZScgaW4gdGhpcy5tYW5pZmVzdCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0Lm1lZGlhU2VxdWVuY2UgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignaW5mbycsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdkZWZhdWx0aW5nIG1lZGlhIHNlcXVlbmNlIHRvIHplcm8nXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoISgnZGlzY29udGludWl0eVNlcXVlbmNlJyBpbiB0aGlzLm1hbmlmZXN0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QuZGlzY29udGludWl0eVNlcXVlbmNlID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2luZm8nLCB7XG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnZGVmYXVsdGluZyBkaXNjb250aW51aXR5IHNlcXVlbmNlIHRvIHplcm8nXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoZW50cnkuZHVyYXRpb24gPiAwKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFVyaS5kdXJhdGlvbiA9IGVudHJ5LmR1cmF0aW9uO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGVudHJ5LmR1cmF0aW9uID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFVyaS5kdXJhdGlvbiA9IDAuMDE7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdpbmZvJywge1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ3VwZGF0aW5nIHplcm8gc2VnbWVudCBkdXJhdGlvbiB0byBhIHNtYWxsIHZhbHVlJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5zZWdtZW50cyA9IHVyaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAga2V5OiBmdW5jdGlvbiBrZXkoKSB7XG4gICAgICAgICAgICAgIGlmICghZW50cnkuYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpZ25vcmluZyBrZXkgZGVjbGFyYXRpb24gd2l0aG91dCBhdHRyaWJ1dGUgbGlzdCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH0gLy8gY2xlYXIgdGhlIGFjdGl2ZSBlbmNyeXB0aW9uIGtleVxuXG5cbiAgICAgICAgICAgICAgaWYgKGVudHJ5LmF0dHJpYnV0ZXMuTUVUSE9EID09PSAnTk9ORScpIHtcbiAgICAgICAgICAgICAgICBfa2V5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoIWVudHJ5LmF0dHJpYnV0ZXMuVVJJKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCd3YXJuJywge1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2lnbm9yaW5nIGtleSBkZWNsYXJhdGlvbiB3aXRob3V0IFVSSSdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoZW50cnkuYXR0cmlidXRlcy5LRVlGT1JNQVQgPT09ICdjb20uYXBwbGUuc3RyZWFtaW5na2V5ZGVsaXZlcnknKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5jb250ZW50UHJvdGVjdGlvbiA9IHRoaXMubWFuaWZlc3QuY29udGVudFByb3RlY3Rpb24gfHwge307IC8vIFRPRE86IGFkZCBmdWxsIHN1cHBvcnQgZm9yIHRoaXMuXG5cbiAgICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LmNvbnRlbnRQcm90ZWN0aW9uWydjb20uYXBwbGUuZnBzLjFfMCddID0ge1xuICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogZW50cnkuYXR0cmlidXRlc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGVudHJ5LmF0dHJpYnV0ZXMuS0VZRk9STUFUID09PSAnY29tLm1pY3Jvc29mdC5wbGF5cmVhZHknKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5jb250ZW50UHJvdGVjdGlvbiA9IHRoaXMubWFuaWZlc3QuY29udGVudFByb3RlY3Rpb24gfHwge307IC8vIFRPRE86IGFkZCBmdWxsIHN1cHBvcnQgZm9yIHRoaXMuXG5cbiAgICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LmNvbnRlbnRQcm90ZWN0aW9uWydjb20ubWljcm9zb2Z0LnBsYXlyZWFkeSddID0ge1xuICAgICAgICAgICAgICAgICAgdXJpOiBlbnRyeS5hdHRyaWJ1dGVzLlVSSVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9IC8vIGNoZWNrIGlmIHRoZSBjb250ZW50IGlzIGVuY3J5cHRlZCBmb3IgV2lkZXZpbmVcbiAgICAgICAgICAgICAgLy8gV2lkZXZpbmUvSExTIHNwZWM6IGh0dHBzOi8vc3RvcmFnZS5nb29nbGVhcGlzLmNvbS93dmRvY3MvV2lkZXZpbmVfRFJNX0hMUy5wZGZcblxuXG4gICAgICAgICAgICAgIGlmIChlbnRyeS5hdHRyaWJ1dGVzLktFWUZPUk1BVCA9PT0gd2lkZXZpbmVVdWlkKSB7XG4gICAgICAgICAgICAgICAgdmFyIFZBTElEX01FVEhPRFMgPSBbJ1NBTVBMRS1BRVMnLCAnU0FNUExFLUFFUy1DVFInLCAnU0FNUExFLUFFUy1DRU5DJ107XG5cbiAgICAgICAgICAgICAgICBpZiAoVkFMSURfTUVUSE9EUy5pbmRleE9mKGVudHJ5LmF0dHJpYnV0ZXMuTUVUSE9EKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2ludmFsaWQga2V5IG1ldGhvZCBwcm92aWRlZCBmb3IgV2lkZXZpbmUnXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZW50cnkuYXR0cmlidXRlcy5NRVRIT0QgPT09ICdTQU1QTEUtQUVTLUNFTkMnKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdTQU1QTEUtQUVTLUNFTkMgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBTQU1QTEUtQUVTLUNUUiBpbnN0ZWFkJ1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LmF0dHJpYnV0ZXMuVVJJLnN1YnN0cmluZygwLCAyMykgIT09ICdkYXRhOnRleHQvcGxhaW47YmFzZTY0LCcpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2ludmFsaWQga2V5IFVSSSBwcm92aWRlZCBmb3IgV2lkZXZpbmUnXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIShlbnRyeS5hdHRyaWJ1dGVzLktFWUlEICYmIGVudHJ5LmF0dHJpYnV0ZXMuS0VZSUQuc3Vic3RyaW5nKDAsIDIpID09PSAnMHgnKSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCd3YXJuJywge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnaW52YWxpZCBrZXkgSUQgcHJvdmlkZWQgZm9yIFdpZGV2aW5lJ1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSAvLyBpZiBXaWRldmluZSBrZXkgYXR0cmlidXRlcyBhcmUgdmFsaWQsIHN0b3JlIHRoZW0gYXMgYGNvbnRlbnRQcm90ZWN0aW9uYFxuICAgICAgICAgICAgICAgIC8vIG9uIHRoZSBtYW5pZmVzdCB0byBlbXVsYXRlIFdpZGV2aW5lIHRhZyBzdHJ1Y3R1cmUgaW4gYSBEQVNIIG1wZFxuXG5cbiAgICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LmNvbnRlbnRQcm90ZWN0aW9uID0gdGhpcy5tYW5pZmVzdC5jb250ZW50UHJvdGVjdGlvbiB8fCB7fTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LmNvbnRlbnRQcm90ZWN0aW9uWydjb20ud2lkZXZpbmUuYWxwaGEnXSA9IHtcbiAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1lSWRVcmk6IGVudHJ5LmF0dHJpYnV0ZXMuS0VZRk9STUFULFxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgJzB4JyBmcm9tIHRoZSBrZXkgaWQgc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgIGtleUlkOiBlbnRyeS5hdHRyaWJ1dGVzLktFWUlELnN1YnN0cmluZygyKVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIC8vIGRlY29kZSB0aGUgYmFzZTY0LWVuY29kZWQgUFNTSCBib3hcbiAgICAgICAgICAgICAgICAgIHBzc2g6IGRlY29kZUI2NFRvVWludDhBcnJheShlbnRyeS5hdHRyaWJ1dGVzLlVSSS5zcGxpdCgnLCcpWzFdKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKCFlbnRyeS5hdHRyaWJ1dGVzLk1FVEhPRCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdkZWZhdWx0aW5nIGtleSBtZXRob2QgdG8gQUVTLTEyOCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSAvLyBzZXR1cCBhbiBlbmNyeXB0aW9uIGtleSBmb3IgdXBjb21pbmcgc2VnbWVudHNcblxuXG4gICAgICAgICAgICAgIF9rZXkgPSB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBlbnRyeS5hdHRyaWJ1dGVzLk1FVEhPRCB8fCAnQUVTLTEyOCcsXG4gICAgICAgICAgICAgICAgdXJpOiBlbnRyeS5hdHRyaWJ1dGVzLlVSSVxuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgZW50cnkuYXR0cmlidXRlcy5JViAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBfa2V5Lml2ID0gZW50cnkuYXR0cmlidXRlcy5JVjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdtZWRpYS1zZXF1ZW5jZSc6IGZ1bmN0aW9uIG1lZGlhU2VxdWVuY2UoKSB7XG4gICAgICAgICAgICAgIGlmICghaXNGaW5pdGUoZW50cnkubnVtYmVyKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpZ25vcmluZyBpbnZhbGlkIG1lZGlhIHNlcXVlbmNlOiAnICsgZW50cnkubnVtYmVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5tZWRpYVNlcXVlbmNlID0gZW50cnkubnVtYmVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdkaXNjb250aW51aXR5LXNlcXVlbmNlJzogZnVuY3Rpb24gZGlzY29udGludWl0eVNlcXVlbmNlKCkge1xuICAgICAgICAgICAgICBpZiAoIWlzRmluaXRlKGVudHJ5Lm51bWJlcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnaWdub3JpbmcgaW52YWxpZCBkaXNjb250aW51aXR5IHNlcXVlbmNlOiAnICsgZW50cnkubnVtYmVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5kaXNjb250aW51aXR5U2VxdWVuY2UgPSBlbnRyeS5udW1iZXI7XG4gICAgICAgICAgICAgIGN1cnJlbnRUaW1lbGluZSA9IGVudHJ5Lm51bWJlcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncGxheWxpc3QtdHlwZSc6IGZ1bmN0aW9uIHBsYXlsaXN0VHlwZSgpIHtcbiAgICAgICAgICAgICAgaWYgKCEvVk9EfEVWRU5ULy50ZXN0KGVudHJ5LnBsYXlsaXN0VHlwZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnaWdub3JpbmcgdW5rbm93biBwbGF5bGlzdCB0eXBlOiAnICsgZW50cnkucGxheWxpc3RcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LnBsYXlsaXN0VHlwZSA9IGVudHJ5LnBsYXlsaXN0VHlwZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYXA6IGZ1bmN0aW9uIG1hcCgpIHtcbiAgICAgICAgICAgICAgY3VycmVudE1hcCA9IHt9O1xuXG4gICAgICAgICAgICAgIGlmIChlbnRyeS51cmkpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50TWFwLnVyaSA9IGVudHJ5LnVyaTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChlbnRyeS5ieXRlcmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50TWFwLmJ5dGVyYW5nZSA9IGVudHJ5LmJ5dGVyYW5nZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChfa2V5KSB7XG4gICAgICAgICAgICAgICAgY3VycmVudE1hcC5rZXkgPSBfa2V5O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N0cmVhbS1pbmYnOiBmdW5jdGlvbiBzdHJlYW1JbmYoKSB7XG4gICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QucGxheWxpc3RzID0gdXJpcztcbiAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5tZWRpYUdyb3VwcyA9IHRoaXMubWFuaWZlc3QubWVkaWFHcm91cHMgfHwgZGVmYXVsdE1lZGlhR3JvdXBzO1xuXG4gICAgICAgICAgICAgIGlmICghZW50cnkuYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpZ25vcmluZyBlbXB0eSBzdHJlYW0taW5mIGF0dHJpYnV0ZXMnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKCFjdXJyZW50VXJpLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50VXJpLmF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIF9leHRlbmRzKGN1cnJlbnRVcmkuYXR0cmlidXRlcywgZW50cnkuYXR0cmlidXRlcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWVkaWE6IGZ1bmN0aW9uIG1lZGlhKCkge1xuICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0Lm1lZGlhR3JvdXBzID0gdGhpcy5tYW5pZmVzdC5tZWRpYUdyb3VwcyB8fCBkZWZhdWx0TWVkaWFHcm91cHM7XG5cbiAgICAgICAgICAgICAgaWYgKCEoZW50cnkuYXR0cmlidXRlcyAmJiBlbnRyeS5hdHRyaWJ1dGVzLlRZUEUgJiYgZW50cnkuYXR0cmlidXRlc1snR1JPVVAtSUQnXSAmJiBlbnRyeS5hdHRyaWJ1dGVzLk5BTUUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCd3YXJuJywge1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2lnbm9yaW5nIGluY29tcGxldGUgb3IgbWlzc2luZyBtZWRpYSBncm91cCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH0gLy8gZmluZCB0aGUgbWVkaWEgZ3JvdXAsIGNyZWF0aW5nIGRlZmF1bHRzIGFzIG5lY2Vzc2FyeVxuXG5cbiAgICAgICAgICAgICAgdmFyIG1lZGlhR3JvdXBUeXBlID0gdGhpcy5tYW5pZmVzdC5tZWRpYUdyb3Vwc1tlbnRyeS5hdHRyaWJ1dGVzLlRZUEVdO1xuICAgICAgICAgICAgICBtZWRpYUdyb3VwVHlwZVtlbnRyeS5hdHRyaWJ1dGVzWydHUk9VUC1JRCddXSA9IG1lZGlhR3JvdXBUeXBlW2VudHJ5LmF0dHJpYnV0ZXNbJ0dST1VQLUlEJ11dIHx8IHt9O1xuICAgICAgICAgICAgICBtZWRpYUdyb3VwID0gbWVkaWFHcm91cFR5cGVbZW50cnkuYXR0cmlidXRlc1snR1JPVVAtSUQnXV07IC8vIGNvbGxlY3QgdGhlIHJlbmRpdGlvbiBtZXRhZGF0YVxuXG4gICAgICAgICAgICAgIHJlbmRpdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiAveWVzL2kudGVzdChlbnRyeS5hdHRyaWJ1dGVzLkRFRkFVTFQpXG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgaWYgKHJlbmRpdGlvbi5kZWZhdWx0KSB7XG4gICAgICAgICAgICAgICAgcmVuZGl0aW9uLmF1dG9zZWxlY3QgPSB0cnVlO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlbmRpdGlvbi5hdXRvc2VsZWN0ID0gL3llcy9pLnRlc3QoZW50cnkuYXR0cmlidXRlcy5BVVRPU0VMRUNUKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChlbnRyeS5hdHRyaWJ1dGVzLkxBTkdVQUdFKSB7XG4gICAgICAgICAgICAgICAgcmVuZGl0aW9uLmxhbmd1YWdlID0gZW50cnkuYXR0cmlidXRlcy5MQU5HVUFHRTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChlbnRyeS5hdHRyaWJ1dGVzLlVSSSkge1xuICAgICAgICAgICAgICAgIHJlbmRpdGlvbi51cmkgPSBlbnRyeS5hdHRyaWJ1dGVzLlVSSTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChlbnRyeS5hdHRyaWJ1dGVzWydJTlNUUkVBTS1JRCddKSB7XG4gICAgICAgICAgICAgICAgcmVuZGl0aW9uLmluc3RyZWFtSWQgPSBlbnRyeS5hdHRyaWJ1dGVzWydJTlNUUkVBTS1JRCddO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGVudHJ5LmF0dHJpYnV0ZXMuQ0hBUkFDVEVSSVNUSUNTKSB7XG4gICAgICAgICAgICAgICAgcmVuZGl0aW9uLmNoYXJhY3RlcmlzdGljcyA9IGVudHJ5LmF0dHJpYnV0ZXMuQ0hBUkFDVEVSSVNUSUNTO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGVudHJ5LmF0dHJpYnV0ZXMuRk9SQ0VEKSB7XG4gICAgICAgICAgICAgICAgcmVuZGl0aW9uLmZvcmNlZCA9IC95ZXMvaS50ZXN0KGVudHJ5LmF0dHJpYnV0ZXMuRk9SQ0VEKTtcbiAgICAgICAgICAgICAgfSAvLyBpbnNlcnQgdGhlIG5ldyByZW5kaXRpb25cblxuXG4gICAgICAgICAgICAgIG1lZGlhR3JvdXBbZW50cnkuYXR0cmlidXRlcy5OQU1FXSA9IHJlbmRpdGlvbjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkaXNjb250aW51aXR5OiBmdW5jdGlvbiBkaXNjb250aW51aXR5KCkge1xuICAgICAgICAgICAgICBjdXJyZW50VGltZWxpbmUgKz0gMTtcbiAgICAgICAgICAgICAgY3VycmVudFVyaS5kaXNjb250aW51aXR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5kaXNjb250aW51aXR5U3RhcnRzLnB1c2godXJpcy5sZW5ndGgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwcm9ncmFtLWRhdGUtdGltZSc6IGZ1bmN0aW9uIHByb2dyYW1EYXRlVGltZSgpIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm1hbmlmZXN0LmRhdGVUaW1lU3RyaW5nID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIC8vIFBST0dSQU0tREFURS1USU1FIGlzIGEgbWVkaWEtc2VnbWVudCB0YWcsIGJ1dCBmb3IgYmFja3dhcmRzXG4gICAgICAgICAgICAgICAgLy8gY29tcGF0aWJpbGl0eSwgd2UgYWRkIHRoZSBmaXJzdCBvY2N1cmVuY2Ugb2YgdGhlIFBST0dSQU0tREFURS1USU1FIHRhZ1xuICAgICAgICAgICAgICAgIC8vIHRvIHRoZSBtYW5pZmVzdCBvYmplY3RcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBDb25zaWRlciByZW1vdmluZyB0aGlzIGluIGZ1dHVyZSBtYWpvciB2ZXJzaW9uXG4gICAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5kYXRlVGltZVN0cmluZyA9IGVudHJ5LmRhdGVUaW1lU3RyaW5nO1xuICAgICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QuZGF0ZVRpbWVPYmplY3QgPSBlbnRyeS5kYXRlVGltZU9iamVjdDtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGN1cnJlbnRVcmkuZGF0ZVRpbWVTdHJpbmcgPSBlbnRyeS5kYXRlVGltZVN0cmluZztcbiAgICAgICAgICAgICAgY3VycmVudFVyaS5kYXRlVGltZU9iamVjdCA9IGVudHJ5LmRhdGVUaW1lT2JqZWN0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRhcmdldGR1cmF0aW9uOiBmdW5jdGlvbiB0YXJnZXRkdXJhdGlvbigpIHtcbiAgICAgICAgICAgICAgaWYgKCFpc0Zpbml0ZShlbnRyeS5kdXJhdGlvbikgfHwgZW50cnkuZHVyYXRpb24gPCAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCd3YXJuJywge1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2lnbm9yaW5nIGludmFsaWQgdGFyZ2V0IGR1cmF0aW9uOiAnICsgZW50cnkuZHVyYXRpb25cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LnRhcmdldER1cmF0aW9uID0gZW50cnkuZHVyYXRpb247XG4gICAgICAgICAgICAgIHNldEhvbGRCYWNrLmNhbGwodGhpcywgdGhpcy5tYW5pZmVzdCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgICAgICAgICBpZiAoIWVudHJ5LmF0dHJpYnV0ZXMgfHwgaXNOYU4oZW50cnkuYXR0cmlidXRlc1snVElNRS1PRkZTRVQnXSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnaWdub3Jpbmcgc3RhcnQgZGVjbGFyYXRpb24gd2l0aG91dCBhcHByb3ByaWF0ZSBhdHRyaWJ1dGUgbGlzdCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LnN0YXJ0ID0ge1xuICAgICAgICAgICAgICAgIHRpbWVPZmZzZXQ6IGVudHJ5LmF0dHJpYnV0ZXNbJ1RJTUUtT0ZGU0VUJ10sXG4gICAgICAgICAgICAgICAgcHJlY2lzZTogZW50cnkuYXR0cmlidXRlcy5QUkVDSVNFXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2N1ZS1vdXQnOiBmdW5jdGlvbiBjdWVPdXQoKSB7XG4gICAgICAgICAgICAgIGN1cnJlbnRVcmkuY3VlT3V0ID0gZW50cnkuZGF0YTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnY3VlLW91dC1jb250JzogZnVuY3Rpb24gY3VlT3V0Q29udCgpIHtcbiAgICAgICAgICAgICAgY3VycmVudFVyaS5jdWVPdXRDb250ID0gZW50cnkuZGF0YTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnY3VlLWluJzogZnVuY3Rpb24gY3VlSW4oKSB7XG4gICAgICAgICAgICAgIGN1cnJlbnRVcmkuY3VlSW4gPSBlbnRyeS5kYXRhO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdza2lwJzogZnVuY3Rpb24gc2tpcCgpIHtcbiAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5za2lwID0gY2FtZWxDYXNlS2V5cyhlbnRyeS5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgICAgdGhpcy53YXJuT25NaXNzaW5nQXR0cmlidXRlc18oJyNFWFQtWC1TS0lQJywgZW50cnkuYXR0cmlidXRlcywgWydTS0lQUEVELVNFR01FTlRTJ10pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYXJ0JzogZnVuY3Rpb24gcGFydCgpIHtcbiAgICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgaGFzUGFydHMgPSB0cnVlOyAvLyBwYXJ0cyBhcmUgYWx3YXlzIHNwZWNpZmVkIGJlZm9yZSBhIHNlZ21lbnRcblxuICAgICAgICAgICAgICB2YXIgc2VnbWVudEluZGV4ID0gdGhpcy5tYW5pZmVzdC5zZWdtZW50cy5sZW5ndGg7XG4gICAgICAgICAgICAgIHZhciBwYXJ0ID0gY2FtZWxDYXNlS2V5cyhlbnRyeS5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgICAgY3VycmVudFVyaS5wYXJ0cyA9IGN1cnJlbnRVcmkucGFydHMgfHwgW107XG4gICAgICAgICAgICAgIGN1cnJlbnRVcmkucGFydHMucHVzaChwYXJ0KTtcblxuICAgICAgICAgICAgICBpZiAocGFydC5ieXRlcmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnQuYnl0ZXJhbmdlLmhhc093blByb3BlcnR5KCdvZmZzZXQnKSkge1xuICAgICAgICAgICAgICAgICAgcGFydC5ieXRlcmFuZ2Uub2Zmc2V0ID0gbGFzdFBhcnRCeXRlcmFuZ2VFbmQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGFzdFBhcnRCeXRlcmFuZ2VFbmQgPSBwYXJ0LmJ5dGVyYW5nZS5vZmZzZXQgKyBwYXJ0LmJ5dGVyYW5nZS5sZW5ndGg7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB2YXIgcGFydEluZGV4ID0gY3VycmVudFVyaS5wYXJ0cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICB0aGlzLndhcm5Pbk1pc3NpbmdBdHRyaWJ1dGVzXyhcIiNFWFQtWC1QQVJUICNcIiArIHBhcnRJbmRleCArIFwiIGZvciBzZWdtZW50ICNcIiArIHNlZ21lbnRJbmRleCwgZW50cnkuYXR0cmlidXRlcywgWydVUkknLCAnRFVSQVRJT04nXSk7XG5cbiAgICAgICAgICAgICAgaWYgKHRoaXMubWFuaWZlc3QucmVuZGl0aW9uUmVwb3J0cykge1xuICAgICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QucmVuZGl0aW9uUmVwb3J0cy5mb3JFYWNoKGZ1bmN0aW9uIChyLCBpKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoIXIuaGFzT3duUHJvcGVydHkoJ2xhc3RQYXJ0JykpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCIjRVhULVgtUkVORElUSU9OLVJFUE9SVCAjXCIgKyBpICsgXCIgbGFja3MgcmVxdWlyZWQgYXR0cmlidXRlKHMpOiBMQVNULVBBUlRcIlxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzZXJ2ZXItY29udHJvbCc6IGZ1bmN0aW9uIHNlcnZlckNvbnRyb2woKSB7XG4gICAgICAgICAgICAgIHZhciBhdHRycyA9IHRoaXMubWFuaWZlc3Quc2VydmVyQ29udHJvbCA9IGNhbWVsQ2FzZUtleXMoZW50cnkuYXR0cmlidXRlcyk7XG5cbiAgICAgICAgICAgICAgaWYgKCFhdHRycy5oYXNPd25Qcm9wZXJ0eSgnY2FuQmxvY2tSZWxvYWQnKSkge1xuICAgICAgICAgICAgICAgIGF0dHJzLmNhbkJsb2NrUmVsb2FkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdpbmZvJywge1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJyNFWFQtWC1TRVJWRVItQ09OVFJPTCBkZWZhdWx0aW5nIENBTi1CTE9DSy1SRUxPQUQgdG8gZmFsc2UnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBzZXRIb2xkQmFjay5jYWxsKHRoaXMsIHRoaXMubWFuaWZlc3QpO1xuXG4gICAgICAgICAgICAgIGlmIChhdHRycy5jYW5Ta2lwRGF0ZXJhbmdlcyAmJiAhYXR0cnMuaGFzT3duUHJvcGVydHkoJ2NhblNraXBVbnRpbCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCd3YXJuJywge1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJyNFWFQtWC1TRVJWRVItQ09OVFJPTCBsYWNrcyByZXF1aXJlZCBhdHRyaWJ1dGUgQ0FOLVNLSVAtVU5USUwgd2hpY2ggaXMgcmVxdWlyZWQgd2hlbiBDQU4tU0tJUC1EQVRFUkFOR0VTIGlzIHNldCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwcmVsb2FkLWhpbnQnOiBmdW5jdGlvbiBwcmVsb2FkSGludCgpIHtcbiAgICAgICAgICAgICAgLy8gcGFydHMgYXJlIGFsd2F5cyBzcGVjaWZlZCBiZWZvcmUgYSBzZWdtZW50XG4gICAgICAgICAgICAgIHZhciBzZWdtZW50SW5kZXggPSB0aGlzLm1hbmlmZXN0LnNlZ21lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgdmFyIGhpbnQgPSBjYW1lbENhc2VLZXlzKGVudHJ5LmF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgICB2YXIgaXNQYXJ0ID0gaGludC50eXBlICYmIGhpbnQudHlwZSA9PT0gJ1BBUlQnO1xuICAgICAgICAgICAgICBjdXJyZW50VXJpLnByZWxvYWRIaW50cyA9IGN1cnJlbnRVcmkucHJlbG9hZEhpbnRzIHx8IFtdO1xuICAgICAgICAgICAgICBjdXJyZW50VXJpLnByZWxvYWRIaW50cy5wdXNoKGhpbnQpO1xuXG4gICAgICAgICAgICAgIGlmIChoaW50LmJ5dGVyYW5nZSkge1xuICAgICAgICAgICAgICAgIGlmICghaGludC5ieXRlcmFuZ2UuaGFzT3duUHJvcGVydHkoJ29mZnNldCcpKSB7XG4gICAgICAgICAgICAgICAgICAvLyB1c2UgbGFzdCBwYXJ0IGJ5dGVyYW5nZSBlbmQgb3IgemVybyBpZiBub3QgYSBwYXJ0LlxuICAgICAgICAgICAgICAgICAgaGludC5ieXRlcmFuZ2Uub2Zmc2V0ID0gaXNQYXJ0ID8gbGFzdFBhcnRCeXRlcmFuZ2VFbmQgOiAwO1xuXG4gICAgICAgICAgICAgICAgICBpZiAoaXNQYXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RQYXJ0Qnl0ZXJhbmdlRW5kID0gaGludC5ieXRlcmFuZ2Uub2Zmc2V0ICsgaGludC5ieXRlcmFuZ2UubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHZhciBpbmRleCA9IGN1cnJlbnRVcmkucHJlbG9hZEhpbnRzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgIHRoaXMud2Fybk9uTWlzc2luZ0F0dHJpYnV0ZXNfKFwiI0VYVC1YLVBSRUxPQUQtSElOVCAjXCIgKyBpbmRleCArIFwiIGZvciBzZWdtZW50ICNcIiArIHNlZ21lbnRJbmRleCwgZW50cnkuYXR0cmlidXRlcywgWydUWVBFJywgJ1VSSSddKTtcblxuICAgICAgICAgICAgICBpZiAoIWhpbnQudHlwZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfSAvLyBzZWFyY2ggdGhyb3VnaCBhbGwgcHJlbG9hZCBoaW50cyBleGNlcHQgZm9yIHRoZSBjdXJyZW50IG9uZSBmb3JcbiAgICAgICAgICAgICAgLy8gYSBkdXBsaWNhdGUgdHlwZS5cblxuXG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3VycmVudFVyaS5wcmVsb2FkSGludHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG90aGVySGludCA9IGN1cnJlbnRVcmkucHJlbG9hZEhpbnRzW2ldO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFvdGhlckhpbnQudHlwZSkge1xuICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG90aGVySGludC50eXBlID09PSBoaW50LnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCIjRVhULVgtUFJFTE9BRC1ISU5UICNcIiArIGluZGV4ICsgXCIgZm9yIHNlZ21lbnQgI1wiICsgc2VnbWVudEluZGV4ICsgXCIgaGFzIHRoZSBzYW1lIFRZUEUgXCIgKyBoaW50LnR5cGUgKyBcIiBhcyBwcmVsb2FkIGhpbnQgI1wiICsgaVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3JlbmRpdGlvbi1yZXBvcnQnOiBmdW5jdGlvbiByZW5kaXRpb25SZXBvcnQoKSB7XG4gICAgICAgICAgICAgIHZhciByZXBvcnQgPSBjYW1lbENhc2VLZXlzKGVudHJ5LmF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LnJlbmRpdGlvblJlcG9ydHMgPSB0aGlzLm1hbmlmZXN0LnJlbmRpdGlvblJlcG9ydHMgfHwgW107XG4gICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QucmVuZGl0aW9uUmVwb3J0cy5wdXNoKHJlcG9ydCk7XG4gICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMubWFuaWZlc3QucmVuZGl0aW9uUmVwb3J0cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICB2YXIgcmVxdWlyZWQgPSBbJ0xBU1QtTVNOJywgJ1VSSSddO1xuXG4gICAgICAgICAgICAgIGlmIChoYXNQYXJ0cykge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkLnB1c2goJ0xBU1QtUEFSVCcpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdGhpcy53YXJuT25NaXNzaW5nQXR0cmlidXRlc18oXCIjRVhULVgtUkVORElUSU9OLVJFUE9SVCAjXCIgKyBpbmRleCwgZW50cnkuYXR0cmlidXRlcywgcmVxdWlyZWQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYXJ0LWluZic6IGZ1bmN0aW9uIHBhcnRJbmYoKSB7XG4gICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QucGFydEluZiA9IGNhbWVsQ2FzZUtleXMoZW50cnkuYXR0cmlidXRlcyk7XG4gICAgICAgICAgICAgIHRoaXMud2Fybk9uTWlzc2luZ0F0dHJpYnV0ZXNfKCcjRVhULVgtUEFSVC1JTkYnLCBlbnRyeS5hdHRyaWJ1dGVzLCBbJ1BBUlQtVEFSR0VUJ10pO1xuXG4gICAgICAgICAgICAgIGlmICh0aGlzLm1hbmlmZXN0LnBhcnRJbmYucGFydFRhcmdldCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QucGFydFRhcmdldER1cmF0aW9uID0gdGhpcy5tYW5pZmVzdC5wYXJ0SW5mLnBhcnRUYXJnZXQ7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBzZXRIb2xkQmFjay5jYWxsKHRoaXMsIHRoaXMubWFuaWZlc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pW2VudHJ5LnRhZ1R5cGVdIHx8IG5vb3ApLmNhbGwoc2VsZik7XG4gICAgICAgIH0sXG4gICAgICAgIHVyaTogZnVuY3Rpb24gdXJpKCkge1xuICAgICAgICAgIGN1cnJlbnRVcmkudXJpID0gZW50cnkudXJpO1xuICAgICAgICAgIHVyaXMucHVzaChjdXJyZW50VXJpKTsgLy8gaWYgbm8gZXhwbGljaXQgZHVyYXRpb24gd2FzIGRlY2xhcmVkLCB1c2UgdGhlIHRhcmdldCBkdXJhdGlvblxuXG4gICAgICAgICAgaWYgKHRoaXMubWFuaWZlc3QudGFyZ2V0RHVyYXRpb24gJiYgISgnZHVyYXRpb24nIGluIGN1cnJlbnRVcmkpKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdkZWZhdWx0aW5nIHNlZ21lbnQgZHVyYXRpb24gdG8gdGhlIHRhcmdldCBkdXJhdGlvbidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY3VycmVudFVyaS5kdXJhdGlvbiA9IHRoaXMubWFuaWZlc3QudGFyZ2V0RHVyYXRpb247XG4gICAgICAgICAgfSAvLyBhbm5vdGF0ZSB3aXRoIGVuY3J5cHRpb24gaW5mb3JtYXRpb24sIGlmIG5lY2Vzc2FyeVxuXG5cbiAgICAgICAgICBpZiAoX2tleSkge1xuICAgICAgICAgICAgY3VycmVudFVyaS5rZXkgPSBfa2V5O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGN1cnJlbnRVcmkudGltZWxpbmUgPSBjdXJyZW50VGltZWxpbmU7IC8vIGFubm90YXRlIHdpdGggaW5pdGlhbGl6YXRpb24gc2VnbWVudCBpbmZvcm1hdGlvbiwgaWYgbmVjZXNzYXJ5XG5cbiAgICAgICAgICBpZiAoY3VycmVudE1hcCkge1xuICAgICAgICAgICAgY3VycmVudFVyaS5tYXAgPSBjdXJyZW50TWFwO1xuICAgICAgICAgIH0gLy8gcmVzZXQgdGhlIGxhc3QgYnl0ZXJhbmdlIGVuZCBhcyBpdCBuZWVkcyB0byBiZSAwIGJldHdlZW4gcGFydHNcblxuXG4gICAgICAgICAgbGFzdFBhcnRCeXRlcmFuZ2VFbmQgPSAwOyAvLyBwcmVwYXJlIGZvciB0aGUgbmV4dCBVUklcblxuICAgICAgICAgIGN1cnJlbnRVcmkgPSB7fTtcbiAgICAgICAgfSxcbiAgICAgICAgY29tbWVudDogZnVuY3Rpb24gY29tbWVudCgpIHsvLyBjb21tZW50cyBhcmUgbm90IGltcG9ydGFudCBmb3IgcGxheWJhY2tcbiAgICAgICAgfSxcbiAgICAgICAgY3VzdG9tOiBmdW5jdGlvbiBjdXN0b20oKSB7XG4gICAgICAgICAgLy8gaWYgdGhpcyBpcyBzZWdtZW50LWxldmVsIGRhdGEgYXR0YWNoIHRoZSBvdXRwdXQgdG8gdGhlIHNlZ21lbnRcbiAgICAgICAgICBpZiAoZW50cnkuc2VnbWVudCkge1xuICAgICAgICAgICAgY3VycmVudFVyaS5jdXN0b20gPSBjdXJyZW50VXJpLmN1c3RvbSB8fCB7fTtcbiAgICAgICAgICAgIGN1cnJlbnRVcmkuY3VzdG9tW2VudHJ5LmN1c3RvbVR5cGVdID0gZW50cnkuZGF0YTsgLy8gaWYgdGhpcyBpcyBtYW5pZmVzdC1sZXZlbCBkYXRhIGF0dGFjaCB0byB0aGUgdG9wIGxldmVsIG1hbmlmZXN0IG9iamVjdFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1hbmlmZXN0LmN1c3RvbSA9IHRoaXMubWFuaWZlc3QuY3VzdG9tIHx8IHt9O1xuICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5jdXN0b21bZW50cnkuY3VzdG9tVHlwZV0gPSBlbnRyeS5kYXRhO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlbZW50cnkudHlwZV0uY2FsbChzZWxmKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBQYXJzZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by53YXJuT25NaXNzaW5nQXR0cmlidXRlc18gPSBmdW5jdGlvbiB3YXJuT25NaXNzaW5nQXR0cmlidXRlc18oaWRlbnRpZmllciwgYXR0cmlidXRlcywgcmVxdWlyZWQpIHtcbiAgICB2YXIgbWlzc2luZyA9IFtdO1xuICAgIHJlcXVpcmVkLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgaWYgKCFhdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgbWlzc2luZy5wdXNoKGtleSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAobWlzc2luZy5sZW5ndGgpIHtcbiAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgbWVzc2FnZTogaWRlbnRpZmllciArIFwiIGxhY2tzIHJlcXVpcmVkIGF0dHJpYnV0ZShzKTogXCIgKyBtaXNzaW5nLmpvaW4oJywgJylcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUGFyc2UgdGhlIGlucHV0IHN0cmluZyBhbmQgdXBkYXRlIHRoZSBtYW5pZmVzdCBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjaHVuayBhIHBvdGVudGlhbGx5IGluY29tcGxldGUgcG9ydGlvbiBvZiB0aGUgbWFuaWZlc3RcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucHVzaCA9IGZ1bmN0aW9uIHB1c2goY2h1bmspIHtcbiAgICB0aGlzLmxpbmVTdHJlYW0ucHVzaChjaHVuayk7XG4gIH1cbiAgLyoqXG4gICAqIEZsdXNoIGFueSByZW1haW5pbmcgaW5wdXQuIFRoaXMgY2FuIGJlIGhhbmR5IGlmIHRoZSBsYXN0IGxpbmUgb2YgYW4gTTNVOFxuICAgKiBtYW5pZmVzdCBkaWQgbm90IGNvbnRhaW4gYSB0cmFpbGluZyBuZXdsaW5lIGJ1dCB0aGUgZmlsZSBoYXMgYmVlblxuICAgKiBjb21wbGV0ZWx5IHJlY2VpdmVkLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5lbmQgPSBmdW5jdGlvbiBlbmQoKSB7XG4gICAgLy8gZmx1c2ggYW55IGJ1ZmZlcmVkIGlucHV0XG4gICAgdGhpcy5saW5lU3RyZWFtLnB1c2goJ1xcbicpO1xuICAgIHRoaXMudHJpZ2dlcignZW5kJyk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhbiBhZGRpdGlvbmFsIHBhcnNlciBmb3Igbm9uLXN0YW5kYXJkIHRhZ3NcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9ICAgb3B0aW9ucyAgICAgICAgICAgICAgYSBtYXAgb2Ygb3B0aW9ucyBmb3IgdGhlIGFkZGVkIHBhcnNlclxuICAgKiBAcGFyYW0ge1JlZ0V4cH0gICBvcHRpb25zLmV4cHJlc3Npb24gICBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCB0aGUgY3VzdG9tIGhlYWRlclxuICAgKiBAcGFyYW0ge3N0cmluZ30gICBvcHRpb25zLnR5cGUgICAgICAgICB0aGUgdHlwZSB0byByZWdpc3RlciB0byB0aGUgb3V0cHV0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmRhdGFQYXJzZXJdIGZ1bmN0aW9uIHRvIHBhcnNlIHRoZSBsaW5lIGludG8gYW4gb2JqZWN0XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gIFtvcHRpb25zLnNlZ21lbnRdICAgIHNob3VsZCB0YWcgZGF0YSBiZSBhdHRhY2hlZCB0byB0aGUgc2VnbWVudCBvYmplY3RcbiAgICovXG4gIDtcblxuICBfcHJvdG8uYWRkUGFyc2VyID0gZnVuY3Rpb24gYWRkUGFyc2VyKG9wdGlvbnMpIHtcbiAgICB0aGlzLnBhcnNlU3RyZWFtLmFkZFBhcnNlcihvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogQWRkIGEgY3VzdG9tIGhlYWRlciBtYXBwZXJcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9ICAgb3B0aW9uc1xuICAgKiBAcGFyYW0ge1JlZ0V4cH0gICBvcHRpb25zLmV4cHJlc3Npb24gICBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCB0aGUgY3VzdG9tIGhlYWRlclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcHRpb25zLm1hcCAgICAgICAgICBmdW5jdGlvbiB0byB0cmFuc2xhdGUgdGFnIGludG8gYSBkaWZmZXJlbnQgdGFnXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmFkZFRhZ01hcHBlciA9IGZ1bmN0aW9uIGFkZFRhZ01hcHBlcihvcHRpb25zKSB7XG4gICAgdGhpcy5wYXJzZVN0cmVhbS5hZGRUYWdNYXBwZXIob3B0aW9ucyk7XG4gIH07XG5cbiAgcmV0dXJuIFBhcnNlcjtcbn0oU3RyZWFtKTtcblxuZXhwb3J0IHsgTGluZVN0cmVhbSwgUGFyc2VTdHJlYW0sIFBhcnNlciB9O1xuIl0sIm5hbWVzIjpbIl9pbmhlcml0c0xvb3NlIiwiU3RyZWFtIiwiX2V4dGVuZHMiLCJfYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwiZGVjb2RlQjY0VG9VaW50OEFycmF5IiwiTGluZVN0cmVhbSIsIl9TdHJlYW0iLCJfdGhpcyIsImNhbGwiLCJidWZmZXIiLCJfcHJvdG8iLCJwcm90b3R5cGUiLCJwdXNoIiwiZGF0YSIsIm5leHROZXdsaW5lIiwiaW5kZXhPZiIsInRyaWdnZXIiLCJzdWJzdHJpbmciLCJUQUIiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJwYXJzZUJ5dGVyYW5nZSIsImJ5dGVyYW5nZVN0cmluZyIsIm1hdGNoIiwiZXhlYyIsInJlc3VsdCIsImxlbmd0aCIsInBhcnNlSW50Iiwib2Zmc2V0IiwiYXR0cmlidXRlU2VwYXJhdG9yIiwia2V5IiwidmFsdWUiLCJrZXl2YWx1ZSIsIlJlZ0V4cCIsInBhcnNlQXR0cmlidXRlcyIsImF0dHJpYnV0ZXMiLCJhdHRycyIsInNwbGl0IiwiaSIsImF0dHIiLCJzbGljZSIsInJlcGxhY2UiLCJQYXJzZVN0cmVhbSIsImN1c3RvbVBhcnNlcnMiLCJ0YWdNYXBwZXJzIiwibGluZSIsIl90aGlzMiIsImV2ZW50IiwidHJpbSIsInR5cGUiLCJ1cmkiLCJuZXdMaW5lcyIsInJlZHVjZSIsImFjYyIsIm1hcHBlciIsIm1hcHBlZExpbmUiLCJjb25jYXQiLCJmb3JFYWNoIiwibmV3TGluZSIsInRleHQiLCJ0YWdUeXBlIiwiZHVyYXRpb24iLCJwYXJzZUZsb2F0IiwidGl0bGUiLCJ2ZXJzaW9uIiwibnVtYmVyIiwicGxheWxpc3RUeXBlIiwiYWxsb3dlZCIsInRlc3QiLCJVUkkiLCJCWVRFUkFOR0UiLCJieXRlcmFuZ2UiLCJSRVNPTFVUSU9OIiwicmVzb2x1dGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwiQkFORFdJRFRIIiwiZGF0ZVRpbWVTdHJpbmciLCJkYXRlVGltZU9iamVjdCIsIkRhdGUiLCJJViIsInRvTG93ZXJDYXNlIiwiVWludDMyQXJyYXkiLCJQUkVDSVNFIiwiaGFzT3duUHJvcGVydHkiLCJzdWJrZXkiLCJhZGRQYXJzZXIiLCJfcmVmIiwiX3RoaXMzIiwiZXhwcmVzc2lvbiIsImN1c3RvbVR5cGUiLCJkYXRhUGFyc2VyIiwic2VnbWVudCIsImFkZFRhZ01hcHBlciIsIl9yZWYyIiwibWFwIiwibWFwRm4iLCJjYW1lbENhc2UiLCJzdHIiLCJhIiwidG9VcHBlckNhc2UiLCJjYW1lbENhc2VLZXlzIiwiT2JqZWN0Iiwia2V5cyIsInNldEhvbGRCYWNrIiwibWFuaWZlc3QiLCJzZXJ2ZXJDb250cm9sIiwidGFyZ2V0RHVyYXRpb24iLCJwYXJ0VGFyZ2V0RHVyYXRpb24iLCJ0YWciLCJoYiIsInBoYiIsIm1pblRhcmdldER1cmF0aW9uIiwibWluUGFydER1cmF0aW9uIiwibWVzc2FnZSIsIlBhcnNlciIsImxpbmVTdHJlYW0iLCJwYXJzZVN0cmVhbSIsInBpcGUiLCJzZWxmIiwidXJpcyIsImN1cnJlbnRVcmkiLCJjdXJyZW50TWFwIiwiX2tleSIsImhhc1BhcnRzIiwibm9vcCIsImRlZmF1bHRNZWRpYUdyb3VwcyIsIndpZGV2aW5lVXVpZCIsImN1cnJlbnRUaW1lbGluZSIsImFsbG93Q2FjaGUiLCJkaXNjb250aW51aXR5U3RhcnRzIiwic2VnbWVudHMiLCJsYXN0Qnl0ZXJhbmdlRW5kIiwibGFzdFBhcnRCeXRlcmFuZ2VFbmQiLCJvbiIsInBhcnRzIiwicHJlbG9hZEhpbnRzIiwidGltZWxpbmUiLCJwcmVsb2FkU2VnbWVudCIsImVudHJ5IiwibWVkaWFHcm91cCIsInJlbmRpdGlvbiIsImVuZGxpc3QiLCJlbmRMaXN0IiwiaW5mIiwibWVkaWFTZXF1ZW5jZSIsImRpc2NvbnRpbnVpdHlTZXF1ZW5jZSIsIk1FVEhPRCIsIktFWUZPUk1BVCIsImNvbnRlbnRQcm90ZWN0aW9uIiwiVkFMSURfTUVUSE9EUyIsIktFWUlEIiwic2NoZW1lSWRVcmkiLCJrZXlJZCIsInBzc2giLCJtZXRob2QiLCJpdiIsImlzRmluaXRlIiwicGxheWxpc3QiLCJzdHJlYW1JbmYiLCJwbGF5bGlzdHMiLCJtZWRpYUdyb3VwcyIsIm1lZGlhIiwiVFlQRSIsIk5BTUUiLCJtZWRpYUdyb3VwVHlwZSIsImRlZmF1bHQiLCJERUZBVUxUIiwiYXV0b3NlbGVjdCIsIkFVVE9TRUxFQ1QiLCJMQU5HVUFHRSIsImxhbmd1YWdlIiwiaW5zdHJlYW1JZCIsIkNIQVJBQ1RFUklTVElDUyIsImNoYXJhY3RlcmlzdGljcyIsIkZPUkNFRCIsImZvcmNlZCIsImRpc2NvbnRpbnVpdHkiLCJwcm9ncmFtRGF0ZVRpbWUiLCJ0YXJnZXRkdXJhdGlvbiIsInN0YXJ0IiwiaXNOYU4iLCJ0aW1lT2Zmc2V0IiwicHJlY2lzZSIsImN1ZU91dCIsImN1ZU91dENvbnQiLCJjdWVJbiIsInNraXAiLCJ3YXJuT25NaXNzaW5nQXR0cmlidXRlc18iLCJwYXJ0Iiwic2VnbWVudEluZGV4IiwicGFydEluZGV4IiwicmVuZGl0aW9uUmVwb3J0cyIsInIiLCJjYW5CbG9ja1JlbG9hZCIsImNhblNraXBEYXRlcmFuZ2VzIiwicHJlbG9hZEhpbnQiLCJoaW50IiwiaXNQYXJ0IiwiaW5kZXgiLCJvdGhlckhpbnQiLCJyZW5kaXRpb25SZXBvcnQiLCJyZXBvcnQiLCJyZXF1aXJlZCIsInBhcnRJbmYiLCJwYXJ0VGFyZ2V0IiwiY29tbWVudCIsImN1c3RvbSIsImlkZW50aWZpZXIiLCJtaXNzaW5nIiwiam9pbiIsImNodW5rIiwiZW5kIiwib3B0aW9ucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../node_modules/m3u8-parser/dist/m3u8-parser.es.js\n");

/***/ })

};
;